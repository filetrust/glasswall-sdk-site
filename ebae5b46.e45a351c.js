(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{266:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return o})),t.d(n,"default",(function(){return p}));var r=t(2),a=t(6),i=(t(0),t(290)),l={title:"2.1.7.2.2 JavaScript",sidebar_label:"2.1.7.2.2 JavaScript"},s={unversionedId:"2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_2-javascript",id:"2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_2-javascript",isDocsHomePage:!1,title:"2.1.7.2.2 JavaScript",description:"Glasswall API Language Wrapper Documentation",source:"@site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_2-javascript.md",slug:"/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_2-javascript",permalink:"/glasswall-sdk-site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_2-javascript",version:"current",sidebar_label:"2.1.7.2.2 JavaScript",sidebar:"someSidebar",previous:{title:"2.1.7.2.1 Python",permalink:"/glasswall-sdk-site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_1-python"},next:{title:"2.1.7.2.3 C#",permalink:"/glasswall-sdk-site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_3-c_sharp"}},o=[{value:"1.1 Issues to consider during implementation",id:"11-issues-to-consider-during-implementation",children:[]},{value:"2.1 Files provided",id:"21-files-provided",children:[]},{value:"2.2 Dependencies",id:"22-dependencies",children:[{value:"2.2.1 Framework dependencies",id:"221-framework-dependencies",children:[]},{value:"2.2.2 Module dependencies",id:"222-module-dependencies",children:[]}]},{value:"2.3 Wrapper integration",id:"23-wrapper-integration",children:[]},{value:"2.4 Code example",id:"24-code-example",children:[]},{value:"2.5 Issues to consider",id:"25-issues-to-consider",children:[]}],c={rightToc:o};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("div",{style:{textAlign:"center"}},Object(i.b)("h1",{id:"glasswall-api-language-wrapper-documentation"},"Glasswall API Language Wrapper Documentation"),Object(i.b)("h1",{id:"javascript"},"JavaScript")),Object(i.b)("h1",{id:"1-introduction"},"1 Introduction"),Object(i.b)("p",null,"This is an introductory guide on how to use the language wrappers for the Glasswall API."),Object(i.b)("p",null,"For each language we have provided the following:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The required dependencies and the target platform or framework required for the language. The mentioned platforms and frameworks are the ones that were used during testing, but other versions may or may not work."),Object(i.b)("li",{parentName:"ul"},"A general overview on integrating Glasswall into a project."),Object(i.b)("li",{parentName:"ul"},"A code example demonstrating how the Glasswall library can be used to process a directory of files. Each example shows the file being processed in Manage and Protect mode as well as being analysed in Analysis mode.")),Object(i.b)("h2",{id:"11-issues-to-consider-during-implementation"},"1.1 Issues to consider during implementation"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The Glasswall library is not thread safe, which means that the language wrappers are not thread safe. This can be overcome by running the Glasswall library in a separate process."),Object(i.b)("li",{parentName:"ul"},"We recommend that the Glasswall library is run in separate process in case unforeseen issues arise.")),Object(i.b)("h1",{id:"2-javascript"},"2 JavaScript"),Object(i.b)("h2",{id:"21-files-provided"},"2.1 Files provided"),Object(i.b)("p",null,"The JavaScript wrapper is provided as a single JavaScript file that you include in your script."),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"glasswall.classic.javascript.js")," \u2013 The JavaScript file containing the Glasswall module that is used to interact with the Glasswall library."),Object(i.b)("h2",{id:"22-dependencies"},"2.2 Dependencies"),Object(i.b)("h3",{id:"221-framework-dependencies"},"2.2.1 Framework dependencies"),Object(i.b)("p",null,"The JavaScript wrapper requires Node.js 8 to be installed."),Object(i.b)("h3",{id:"222-module-dependencies"},"2.2.2 Module dependencies"),Object(i.b)("p",null,"The JavaScript wrapper depends on the following npm modules:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"ffi \u2013 2.20"),Object(i.b)("li",{parentName:"ul"},"ref \u2013 1.3.5"),Object(i.b)("li",{parentName:"ul"},"ref-wchar \u2013 1.02")),Object(i.b)("p",null,"A JSON file with all specific dependencies required is deployed with the SDK wrapper, therefore the npm install command can be executed to automatically acquire all required dependencies."),Object(i.b)("h2",{id:"23-wrapper-integration"},"2.3 Wrapper integration"),Object(i.b)("p",null,"The wrapper can be integrated into an existing project by adding the module dependencies and then calling the ",Object(i.b)("strong",{parentName:"p"},"require")," function from your JavaScript script. The path to the Glasswall library is then passed in as an argument when constructing a Glasswall object."),Object(i.b)("p",null,"It is possible to install the modules in an offline environment with the Yarn package manager. More information can be found at ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://yarnpkg.com/blog/2016/11/24/offline-mirror/"}),"https://yarnpkg.com/blog/2016/11/24/offline-mirror/")),Object(i.b)("h2",{id:"24-code-example"},"2.4 Code example"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-javascript"}),'let fs = require(\'fs\');\nlet path = require(\'path\')\n\nlet getFiles = function (dir, filelist) {\n    let files = fs.readdirSync(dir);\n    filelist = filelist || [];\n\n    files.forEach(function (file) {\n        if (fs.statSync(dir + "/" + file).isDirectory()) {\n            filelist = getFiles(dir + \'/\' + file, filelist);\n        }\n        else {\n            filelist.push(dir + "/" + file);\n        }\n    });\n    return filelist;\n};\n\n\nlet writeToFile = function (outDirectory, fileName, content) {\n    fs.writeFileSync(outDirectory + "/" + fileName, content, function (err) {\n        if (err)\n            return console.log(err);\n    });\n};\n\nlet main = function () {\n    const args = process.argv;\n\n    let inputDirectory = args[2];   // The input directory\n    let outputDirectory = args[3];  // The output directory\n    let pathToConfig = args[4];     // The path to the XML content management configuration\n    let pathToGwLib = args[5];      // The path to the Glasswall library\n\n    let glasswall = require("./glasswall.classic.javascript.js");\n    console.log("Loading Library...");\n    let gw = new glasswall(pathToGwLib);\n\n    let xmlContent = fs.readFileSync(pathToConfig);\n    // Apply the XML content management configuration\n    let configXMLStatus = gw.GWFileConfigXML(xmlContent.toString());\n\n    if (configXMLStatus != 1) {\n        // Print the failure reason\n        console.log("Failed to apply the content management configuration for the following reason: " + gw.GWFileErrorMsg());\n        return;\n    }\n\n    fs.mkdirSync(outputDirectory);\n    let files = getFiles(inputDirectory);\n\n    for (let i in files) {\n        let filePath = files[i];\n        let extension = path.extname(filePath).substring(1);\n        let filename = path.basename(filePath);\n\n        // Process the file in File to Memory Protect\n        let manageAndProtectResult = gw.GWFileProtect(filePath, extension);\n\n        if (manageAndProtectResult.status === 1) {\n            writeToFile(outputDirectory, filename, manageAndProtectResult.fileBuffer);\n        }\n\n        // Analyse the file in File to Memory Analysis\n        let analysisResult = gw.GWFileAnalysisAudit(filePath, extension);\n        console.log(analysisResult.status);\n        writeToFile(outputDirectory, filename + ".xml", analysisResult.xmlReport);\n    }\n\n    gw.GWFileDone();\n};\n\n\nif (require.main === module) {\n    main();\n}\n\n\n')),Object(i.b)("h2",{id:"25-issues-to-consider"},"2.5 Issues to consider"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"The JavaScript wrapper has not been tested on Node.js 10.")))}p.isMDXComponent=!0},290:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return f}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=a.a.createContext({}),p=function(e){var n=a.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=p(e.components);return a.a.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(t),b=r,f=d["".concat(l,".").concat(b)]||d[b]||u[b]||i;return t?a.a.createElement(f,s(s({ref:n},c),{},{components:t})):a.a.createElement(f,s({ref:n},c))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=b;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var c=2;c<i;c++)l[c]=t[c];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);