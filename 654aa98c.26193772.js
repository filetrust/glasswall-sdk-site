(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{156:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return o})),a.d(t,"default",(function(){return p}));var n=a(2),l=a(6),r=(a(0),a(281)),s={title:"2.1.7.2.4 Java",sidebar_label:"2.1.7.2.4 Java"},i={unversionedId:"2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_4-java",id:"2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_4-java",isDocsHomePage:!1,title:"2.1.7.2.4 Java",description:"Glasswall API Language Wrapper Documentation",source:"@site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_4-java.md",slug:"/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_4-java",permalink:"/glasswall-sdk-site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_4-java",version:"current",sidebar_label:"2.1.7.2.4 Java",sidebar:"someSidebar",previous:{title:"2.1.7.2.3 C#",permalink:"/glasswall-sdk-site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_7-sdk/2_1_7_2-sdk_wrappers/2_1_7_2_3-c_sharp"},next:{title:"2.1.8 Rebuild CLI",permalink:"/glasswall-sdk-site/docs/2-glasswall_core/2_1-glasswall_rebuild/2_1_8-rebuild_cli"}},o=[{value:"1.1 Issues to consider during implementation",id:"11-issues-to-consider-during-implementation",children:[]},{value:"2.1 Files provided",id:"21-files-provided",children:[]},{value:"2.2 Framework dependencies",id:"22-framework-dependencies",children:[]},{value:"2.3 Wrapper integration",id:"23-wrapper-integration",children:[]},{value:"2.4 Code example",id:"24-code-example",children:[]},{value:"2.5 Issues to consider",id:"25-issues-to-consider",children:[]}],c={rightToc:o};function p(e){var t=e.components,s=Object(l.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},c,s,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("img",{src:a(288).default})),Object(r.b)("div",{style:{textAlign:"center"}},Object(r.b)("h1",{id:"glasswall-api-language-wrapper-documentation"},"Glasswall API Language Wrapper Documentation"),Object(r.b)("h1",{id:"java"},"Java"),Object(r.b)("p",null,"\xa9"," 2020 Glasswall Solutions Ltd ALL RIGHTS RESERVED",Object(r.b)("br",null),"\nALL RIGHTS RESERVED"),Object(r.b)("p",null,"Information contained herein is the property of Glasswall Limited and is proprietary and confidential."),Object(r.b)("p",null,"Martin O'Brien"),Object(r.b)("p",null,"Glasswall Solutions Ltd."),Object(r.b)("p",null,Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:support%40glasswallsolutions.com"}),"support@glasswallsolutions.com"))),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"Creation Date \u2013 14 October 2020")),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"Version \u2013 1")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Copyright and Contact Details")),Object(r.b)("p",null,"The copyright in this work is vested in Glasswall Solutions Ltd, and the document is issued in confidence for the purpose for which it is supplied. It must not be reproduced in whole or in part or used for tendering or manufacturing purposes except under agreement or with the consent in writing of Glasswall Solutions Limited and then only on condition that this notice is included in any such reproduction. No information as to the contents or subject matter of this document or any part thereof arising directly or indirectly there from shall be given orally or in writing or communicated in any manner whatsoever to any third part being an individual firm or company or any employee thereof without the prior consent in writing of Glasswall Solutions Limited."),Object(r.b)("p",null,"\xa9 Glasswall Solutions Limited 2020"),Object(r.b)("p",null,"If there are any questions related to this report, these should be addressed to:"),Object(r.b)("p",null,"Glasswall Solutions Limited"),Object(r.b)("p",null,"e-mail: ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"mailto:support%40glasswallsolutions.com"}),"support@glasswallsolutions.com")),Object(r.b)("h1",{id:""}),Object(r.b)("h1",{id:"1-introduction"},"1 Introduction"),Object(r.b)("p",null,"This is an introductory guide on how to use the language wrappers for the Glasswall API."),Object(r.b)("p",null,"For each language we have provided the following:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"The required dependencies and the target platform or framework required for the language. The mentioned platforms and frameworks are the ones that were used during testing, but other versions may or may not work."),Object(r.b)("li",{parentName:"ul"},"A general overview on integrating Glasswall into a project."),Object(r.b)("li",{parentName:"ul"},"A code example demonstrating how the Glasswall library can be used to process a directory of files. Each example shows the file being processed in Manage and Protect mode as well as being analysed in Analysis mode.")),Object(r.b)("h2",{id:"11-issues-to-consider-during-implementation"},"1.1 Issues to consider during implementation"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"The Glasswall library is not thread safe, which means that the language wrappers are not thread safe. This can be overcome by running the Glasswall library in a separate process."),Object(r.b)("li",{parentName:"ul"},"We recommend that the Glasswall library is run in separate process in case unforeseen issues arise.")),Object(r.b)("h1",{id:"2-java"},"2 Java"),Object(r.b)("h2",{id:"21-files-provided"},"2.1 Files provided"),Object(r.b)("p",null,"The Java wrapper is supplied in two parts: A C++ library that interacts with the Glasswall library and a JAR file that allows Java to interact with the C++ library."),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"libglasswall.classic.java.so.1.1.0")," \u2013 The C++ library for the Linux OS."),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"glasswall.classic.java.dll")," \u2013 The C++ library for the Windows OS."),Object(r.b)("p",null,Object(r.b)("em",{parentName:"p"},"glasswall.classic.java.jar")," \u2013 The JAR file that enables interop between Java and the C++ library. It contains two classes: Glasswall which is used for executing the Glasswall APIs and GlasswallResult which contains the results from most calls to Glasswall."),Object(r.b)("h2",{id:"22-framework-dependencies"},"2.2 Framework dependencies"),Object(r.b)("p",null,"The Java wrapper requires a JVM installed that supports Java 8."),Object(r.b)("h2",{id:"23-wrapper-integration"},"2.3 Wrapper integration"),Object(r.b)("p",null,"The JAR file will need to be added to your project, which will allow you to call the Glasswall library from Java. You will also need to add the path of the ",Object(r.b)("em",{parentName:"p"},"glasswall.classic.java")," library to the ",Object(r.b)("strong",{parentName:"p"},"java.library.path")," property. The Glasswall library will also need to be stored in the library search path otherwise you will get an UnsatisfiedLinkError. The Glasswall library uses signal handling in order to prevent crashes from occurring, but this can interfere with the JVM. Signal chaining will also need to be setup in order to prevent errors in Glasswall from propagating into the JVM. Information on how to set this up can be found at ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.oracle.com/technetwork/java/javase/signals-139944.html"}),"https://www.oracle.com/technetwork/java/javase/signals-139944.html")),Object(r.b)("p",null,"For example, on our Linux machines we may use something like this when running the Java wrapper:"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"export LD","_","PRELOAD=/lib/jvm/jre-1.8.0/lib/amd64/libjsig.so")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"export LD","_","LIBRARY","_","PATH=.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"java \u2013cp glasswall.classic.java.jar:. \u2013Djava.library.path=. \u2026")),Object(r.b)("p",null,"In the example above, the Glasswall library, the ",Object(r.b)("em",{parentName:"p"},"glasswall.classic.java")," library, the ",Object(r.b)("em",{parentName:"p"},"glasswall.classic.java.jar")," and the Java executable are all in the current directory."),Object(r.b)("h2",{id:"24-code-example"},"2.4 Code example"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-java"}),'import java.io.IOException;\nimport java.io.PrintWriter;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\n\nimport com.glasswallsolutions.Glasswall;\nimport com.glasswallsolutions.GlasswallResult;\n\npublic class GlasswallExample {\n\n    public static void main(String[] args) throws IOException\n    {\n        Path xmlConfigPath = Paths.get(args[0]);        // Path to the XML content management file\n        Path inputDirectoryPath = Paths.get(args[1]);   // Path to the input directory\n        Path outputDirectoryPath = Paths.get(args[2]);  // Path to the output directory\n        String absoluteOutputDirectory = outputDirectoryPath.toAbsolutePath().toString();\n\n        Files.createDirectories(outputDirectoryPath);\n\n        // Print the library version\n        System.out.println(String.format("Library version: %s", Glasswall.GWFileVersion ()));\n\n        byte[] xmlConfigBuffer = Files.readAllBytes(xmlConfigPath);\n        String xmlConfig = new String(xmlConfigBuffer, "UTF-8");\n\n        // Apply the content management configuration\n        GlasswallResult configResult = Glasswall.GWFileConfigXML(xmlConfig);\n\n        if (configResult.fileStatus != 1)\n        {\n            System.out.println(String.format("Failed to load the xml config file for the following reason: %s", Glasswall.GWFileErrorMsg()));\n            return;\n        }\n\n        Files.walk(inputDirectoryPath)\n                .forEach((Path file) -> {\n                    if (Files.isRegularFile(file))\n                    {\n                        String fullFilePathName = file.toAbsolutePath().toString();\n                        System.out.println(String.format("Processing file: %s", fullFilePathName));\n\n                        String name = file.getFileName().toString();\n                        // We use the extension as the file type of the input file\n                        String extension = name.substring(name.lastIndexOf(".") + 1);\n\n                        System.out.println ("Calling GWFileProtect");\n                        // Process the file through File to Memory Protect mode\n                        GlasswallResult manageAndProtectResult = Glasswall.GWFileProtect (fullFilePathName, extension);\n                        printProcessInfo (manageAndProtectResult);\n                        writeAllBytes (Paths.get (absoluteOutputDirectory, name), manageAndProtectResult.manageAndProtectBuffer);\n\n                        System.out.println ("Calling GWFileAnalysisAudit");\n                        // Analyse the file with File to Memory Analysis mode\n                        GlasswallResult analysisResult = Glasswall.GWFileAnalysisAudit (fullFilePathName, extension);\n                        printProcessInfo (analysisResult);\n                        writeAllText (Paths.get (absoluteOutputDirectory, name + ".xml"), analysisResult.analysisReport);\n                    }\n                });\n\n        Glasswall.GWFileDone ();\n    }\n\n    static void printProcessInfo(GlasswallResult result)\n    {\n        System.out.println (String.format("Status is: %s", result.fileStatus));\n        GlasswallResult processResult = Glasswall.GWFileProcessStatus();\n        System.out.println(String.format("Process status: %d", processResult.processStatus));\n        System.out.println(String.format("Process message: %s", Glasswall.GWFileProcessMsg()));\n\n        if (result.fileStatus != 1)\n        {\n            System.out.println(String.format("Glasswall error: %s", Glasswall.GWFileErrorMsg()));\n        }\n    }\n\n    static void writeAllBytes(Path filepath, byte[] data)\n    {\n        try\n        {\n            if (data == null)\n            {\n                if (Files.notExists(filepath))\n                {\n                    Files.createFile(filepath);\n                }\n            }\n            else\n            {\n                Files.write(filepath, data, StandardOpenOption.CREATE);\n            }\n        }\n        catch (IOException ex)\n        {\n            System.out.println(String.format("Exception occurred: %s", ex.getMessage()));\n        }\n    }\n\n    static void writeAllText(Path filepath, String data)\n    {\n        try {\n            if (data == null) {\n                if (Files.notExists(filepath)) {\n                    Files.createFile(filepath);\n                }\n            } else {\n                try (PrintWriter writer = new PrintWriter(filepath.toAbsolutePath().toString())) {\n                    writer.write(data);\n                }\n            }\n        }\n        catch (IOException ex)\n        {\n            System.out.println(String.format("Exception occurred: %s", ex.getMessage()));\n        }\n    }\n}\n\n\n')),Object(r.b)("h2",{id:"25-issues-to-consider"},"2.5 Issues to consider"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Very large files can potentially cause OutOfMemoryError to occur when running in File to Memory mode. This is due to certain results being returned as byte arrays. Potential remedy is to process files in File to File mode."),Object(r.b)("li",{parentName:"ul"},"In very exceptional circumstances certain PDF documents may cause a crash to occur. Increasing the stack size of the Java application fixes this issue.")))}p.isMDXComponent=!0},281:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var n=a(0),l=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var c=l.a.createContext({}),p=function(e){var t=l.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return l.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},b=l.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(a),b=n,m=u["".concat(s,".").concat(b)]||u[b]||d[b]||r;return a?l.a.createElement(m,i(i({ref:t},c),{},{components:a})):l.a.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=b;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var c=2;c<r;c++)s[c]=a[c];return l.a.createElement.apply(null,s)}return l.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"},288:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/glasswalllogo-253631de638aaac23c1c3221945b5994.jpg"}}]);