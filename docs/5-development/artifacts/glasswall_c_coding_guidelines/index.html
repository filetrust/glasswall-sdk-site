<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.63">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script>
<script src="/glasswall-sdk-site/js/fix-location.js"></script>
<script src="/glasswall-sdk-site/js/hide-artifacts.js"></script><title data-react-helmet="true">Glasswall C Coding Guidelines | Glasswall Documentation</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Glasswall C Coding Guidelines | Glasswall Documentation"><meta data-react-helmet="true" name="description" content="1. THE C PROGRAMMING LANGUAGE"><meta data-react-helmet="true" property="og:description" content="1. THE C PROGRAMMING LANGUAGE"><meta data-react-helmet="true" property="og:url" content="https://filetrust.github.io/glasswall-sdk-site/docs/5-development/artifacts/glasswall_c_coding_guidelines"><link data-react-helmet="true" rel="shortcut icon" href="/glasswall-sdk-site/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://filetrust.github.io/glasswall-sdk-site/docs/5-development/artifacts/glasswall_c_coding_guidelines"><link rel="stylesheet" href="/glasswall-sdk-site/styles.7aeea284.css">
<link rel="preload" href="/glasswall-sdk-site/styles.224b9508.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/runtime~main.4894b7f9.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/main.6fff0e7d.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/1.1b4556d1.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/2.96103f89.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/166.b218925c.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/167.5739662b.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/935f2afb.7d59ae1f.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/17896441.54002607.js" as="script">
<link rel="preload" href="/glasswall-sdk-site/ac16dd88.dc134dbf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://glasswallsolutions.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/glasswall-sdk-site/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/glasswall-sdk-site/Home">Glasswall Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/glasswall-sdk-site/docs/1-introduction">Documents</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://glasswallsolutions.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/glasswall-sdk-site/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/glasswall-sdk-site/Home">Glasswall Documentation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/glasswall-sdk-site/docs/1-introduction">Documents</a></li><li class="menu__list-item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Glasswall C Coding Guidelines</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1-the-c-programming-language"></a>1. THE C PROGRAMMING LANGUAGE<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1-the-c-programming-language" title="Direct link to heading">#</a></h2><p>Dennis Ritchie developed the original version of the programming language C at AT&amp;T Bell Laboratories in the early 1970s.</p><p>The American National Standards Institute, or ANSI, standardises computer programming languages
in the United States. X3J11 is the name of the ANSI-authorised committee that developed the standard for C, starting in 1983.</p><p>The International Standards Organisation, or ISO, C has a similar responsibility in the
international arena. ISO formed the technical committee JTC1/SC22/WG14 to review and augment
the work of X3J11.</p><p>By 1992, ISO had adopted a standard for C that was essentially identical to X3.159. It
is called ISO 9899:1990. The C standards differ only in format and in the numbering of sections. The wording differs in a few small places but makes no substantive difference to the language definition.</p><p>These Guidelines pertain to C, as defined by ISO 9899:1990.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="2-introduction"></a>2. INTRODUCTION<a aria-hidden="true" tabindex="-1" class="hash-link" href="#2-introduction" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="21-objective"></a>2.1 Objective<a aria-hidden="true" tabindex="-1" class="hash-link" href="#21-objective" title="Direct link to heading">#</a></h3><p>The objective of C Coding Guidelines is to ensure all C programs
produced by, or on behalf of, Glasswall Solutions Ltd, have a clear and
consistent coding style. It is also designed to help write portable C.</p><p>Portability is about minimising the cost of transferring functionality
from one system to another. This can be achieved by keeping the codebase
within the feature set guaranteed to be available on all implementations
that conform to a particular, widely-implemented, standard, in this
case, ISO/IEC 9899:1990.</p><p>Writing for portability is about refusing to increase the <em>unnecessary</em>
costs of porting the code.</p><p>Therefore, these Guidelines mandate where possible, best practices for
writing portable C code, pointing out pitfalls, common misconceptions,
and errors and suggests remedies. The Guidelines are not confined to
that though. They are also comprised of various aspects of the art of
coding, including layout, and name selection. The Guidelines are
designed to produce code that is clear, robust, efficient, maintainable,
and concise.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="22-applicability"></a>2.2 Applicability<a aria-hidden="true" tabindex="-1" class="hash-link" href="#22-applicability" title="Direct link to heading">#</a></h3><p>This Standard shall be applied to all C code written by, or on behalf
of, Glasswall Solutions Ltd, except where:</p><ul><li><p>The customer requires, and Glasswall Solutions Ltd accepts, the
use of a different procedure, or</p></li><li><p>The project can demonstrate, and Glasswall Solutions Ltd
accepts, that these Coding Guidelines are inappropriate for the
project and that acceptable alternative Guidelines are available.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="23-nomenclature"></a>2.3 Nomenclature<a aria-hidden="true" tabindex="-1" class="hash-link" href="#23-nomenclature" title="Direct link to heading">#</a></h3><p>Lucida Console is used for any source code related information. This is
to distinguish it from normal text, and to obviate problems in other
fonts for reading names such as</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">lInfoFlag1</span></div></div></div></div></div><p>which is actually</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">lInfoFlag1</span></div></div></div></div></div><p>(lowercase L and uppercase i look the some in quite a few fonts).
Courier would have served just as well:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">lInfoFlag1</span></div></div></div></div></div><p>Depending on context, the word <em>bracket</em> is used to indicate any of the
paired delimiters <code>()</code>, <code>{}</code>, <code>\[\]</code>.</p><p>Code examples are generally shown in a box with a grey background, using
Lucinda Console font. Sometimes short examples are included in the text
in a monospaced font.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="3-referenced-documents"></a>3. REFERENCED DOCUMENTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#3-referenced-documents" title="Direct link to heading">#</a></h2><ol><li><p><em>ISO/IEC 9899:1990 Programming languages - C</em><br>
This Standard was amended and corrected by ISO/IEC 9899/COR1:1994,
ISO/IEC 9899/AMD1:1995, and ISO/IEC 9899/ COR2:1996.</p></li><li><p><em>The C Programming Language</em><br>
2nd Edition. B.W. Kernighan and D.M. Ritchie. Prentice Hall, 1988</p></li><li><p><em>Software Engineering</em><br>
2nd Edition. lan Sommerville, 1985</p></li><li><p><em>Perl Best Practices</em><br>
Damian Conway. O&#x27;Reilly, 2005<br>
Many of the best practices in this book are pertinent to other programming languages.</p></li><li><p><em>The Standard C Library</em><br>
P.J. Plauger, Prentice Hall, 1992<br>
This book exlains how the library was <em>meant</em> to be used and how it
<em>can</em> be used, and how to implement it, providing approximately 9,000
lines of tested working code that is highly portable and exemplary.</p></li><li><p><em>C Programming FAQs: Frequently Asked Questions</em><br>
Steve Summit, Addison Wesley, 1996<br>
This book addresses over 400 questions providing accurate, insightful,
explanations and clarification of all aspects of C, with numerous code
examples.</p></li><li><p><em>MISRA-C:2004: Guidelines for the use of the C language in critical systems</em><br>
MIRA, 2004<br>
Although designed for safety critical systems, there are many guidelines
pertinent to non-safety critical systems.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="4-c-program-structure"></a>4. C PROGRAM STRUCTURE<a aria-hidden="true" tabindex="-1" class="hash-link" href="#4-c-program-structure" title="Direct link to heading">#</a></h2><p>A C program is the equivalent of a program task as defined in most
Software Structural Design Specifications (SDSs). A specification for an
SDS should be drawn-up for Glasswall Solutions Ltd (unless one exists).</p><p>A C program consists of a set of external objects, which are either
variables or functions.</p><p>A C program may reside in one or more source files, and header files.
Source files may be compiled separately and loaded together, along with
previously compiled functions from libraries.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="5--code-headers"></a>5. <a target="_blank" rel="noopener noreferrer" name="5"></a> CODE HEADERS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#5--code-headers" title="Direct link to heading">#</a></h2><p>This section defines how the header information shall be provided for in
C programs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="51-element-header"></a>5.1 Element Header<a aria-hidden="true" tabindex="-1" class="hash-link" href="#51-element-header" title="Direct link to heading">#</a></h3><p>In C terminology, elements are header files or source files.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="511-source-file-element-header"></a>5.1.1 Source File Element Header<a aria-hidden="true" tabindex="-1" class="hash-link" href="#511-source-file-element-header" title="Direct link to heading">#</a></h4><p>Guideline: Prefix each source file with a template header.</p><p>The following information shall be provided as a minimum in the source
file header:</p><ul><li><p>Copyright statement<br>
<em>Copyright information to protect the business from infringement</em></p></li><li><p>File name<br>
<em>The source file name, fully qualified if deemed necessary</em></p></li><li><p>Revision<br>
<em>The revision of the file as determined by a version control system</em></p></li><li><p>Author<br>
<em>The name or ID of the person who created the file.</em></p></li><li><p>Date<br>
<em>The date the file was last changed, in ISO 8601 if possible (e.g.
YYYYMMDD HH:MM), or any other unambiguous format (e.g., 24-May-2012,
May 24, 2012). Formats such as 04/05/2012 shall not be used due to
the ambiguity (4 May or 5 April?).</em></p></li><li><p>Element interface<br>
<em>This describes the objects exported by the file, or imported into
it.</em></p></li><li><p>Description<br>
<em>A description of the what the file does.</em></p></li></ul><p>A conforming format is shown below. It assumes no tool support. But if a
tool can insert relevant data, then it should do so; however, if use of
such a tool means the format below cannot be adhered to, these
Guidelines permit a format as close as possible to that below.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">************************************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">************************************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">COPYRIGHT GLASSWALL SOLUTIONS LIMITED 2012</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">FILE NAME: initialise.c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REVISION: 1.9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AUTHOR: GPerkins</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">DATE: 2011-10-02 09:23</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       INTERFACE:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           FUNCTIONS: set_msg_out</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      syntax_find</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            SCALARS: status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     bufsize</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     arr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    DESCRIPTION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Performs system-wide initialisation following system load. The</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scheduler must be inactive before syntax_find is invoked.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">------------------------------------------------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="512-header-file-element-header"></a>5.1.2 Header File Element Header<a aria-hidden="true" tabindex="-1" class="hash-link" href="#512-header-file-element-header" title="Direct link to heading">#</a></h4><p>Guideline: Prefix each header file with a template header.</p><p>The following information shall be provided as commentary in the source
file header:</p><ul><li><p>Copyright statement<br>
<em>Copyright information to protect the business from infringement</em></p></li><li><p>File name<br>
<em>The source file name, fully qualified if deemed necessary</em></p></li><li><p>Revision<br>
<em>The revision of the file as determined by a version control system</em></p></li><li><p>Author<br>
<em>The name or ID of the person who created the file.</em></p></li><li><p>Date<br>
<em>The date the file was last changed, in ISO 8601 if possible (e.g.
YYYYMMDD HH:MM), or any other unambiguous format (e.g., 24-May-2012,
May 24, 2012). Formats such as 04/05/2012 shall not be used due to
the ambiguity (4 May or 5 April?).</em></p></li><li><p>Element interface<br>
<em>This describes the objects exported by the file, or imported into
it.</em></p></li><li><p>Description<br>
<em>A description of the what the file does.</em></p></li></ul><p>A conforming format is shown below. It assumes no tool support. But if a
tool can insert relevant data, then it should do so; however, if use of
such a tool means the format below cannot be adhered to, these
Guidelines permit a format as close as possible to that below.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">************************************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">************************************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">COPYRIGHT GLASSWALL SOLUTIONS LIMITED 2012</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">litdef.h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        INTERFACE:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            FUNCTIONS: set_msg_out</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       syntax_find</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            SCALARS: status</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     bufsize</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     arr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        DESCRIPTION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Macro definitions for global use.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">------------------------------------------------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="52-unit-header"></a>5.2 Unit Header<a aria-hidden="true" tabindex="-1" class="hash-link" href="#52-unit-header" title="Direct link to heading">#</a></h3><p>Guideline: Prefix each unit with a template header.</p><p>Units, in C terminology, are functions.</p><p>A unit header shall be provided for each C function. The unit name,
description, and parameters shall be included in the header. <code>RETURNS</code> and
<code>EXTERNAL VARIABLES CHANGED</code> need to be present only if relevant to that
unit.</p><p>A conforming format is shown below. It assumes no tool support. But if a
tool can insert relevant data, then it should do so; however, if use of
such a tool means the format below cannot be adhered to, these
Guidelines permit a format as close as possible to that below.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">************************************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">************************************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">FUNCTION: set_msg_out</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">DESCRIPTION: Places a message in a buffer. The message can have several meanings:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                nop -- no message</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                reject -- message received is rejected</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                msg_par_err -- message parity error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                abort -- fatal error, abort comms session</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PARAMETERS: msg -- the response we are placing in the output buffer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">RETURNS: MSG_OVERFLOW indicating buffer overflow, or SUCCESS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">indicating successful execution.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">------------------------------------------------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status set_msg_out(unsigned char *msg)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    . . .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} /* set_msg_out */</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="6-code-layout"></a>6 CODE LAYOUT<a aria-hidden="true" tabindex="-1" class="hash-link" href="#6-code-layout" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="61-module-layout"></a>6.1 Module Layout<a aria-hidden="true" tabindex="-1" class="hash-link" href="#61-module-layout" title="Direct link to heading">#</a></h3><p>Guideline: Where present, sections of code should be laid out in the
following order, prefixed by the comment shown.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* includes */</span></div></div></div></div></div><p>One or more #include directives.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* defines */</span></div></div></div></div></div><p>One or more #define directives.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* typedefs */</span></div></div></div></div></div><p>One or more typedef statements, one per line.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* globals */</span></div></div></div></div></div><p>One or more C declarations, one per line; intended to be visible outside
the module.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* forward declarations */</span></div></div></div></div></div><p>One or more ANSI C function prototypes, one per line; must apply only to
local functions (others should be in a header file).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="62-bracketing"></a>6.2 Bracketing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#62-bracketing" title="Direct link to heading">#</a></h3><p>Guideline: Brace and parenthesize using BSD and GNU style.</p><p>When setting out a code block, use the BSD and GNU style of bracketing.
That is, place the opening brace on a separate line by itself, indented
to the same level as the controlling expression. Place the closing brace
on a separate line, at the same indentation level.</p><p>Use the same formatting for bracketed lists over multiple lines, for example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">static char *name[] =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Illegal month&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;January&quot;, &quot;February&quot;, &quot;March&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;April&quot;,   &quot;May&quot;,      &quot;June&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;July&quot;,    &quot;August&quot;,   &quot;September&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;October&quot;, &quot;November&quot;, &quot;December&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="63-keywords"></a>6.3 Keywords<a aria-hidden="true" tabindex="-1" class="hash-link" href="#63-keywords" title="Direct link to heading">#</a></h3><p>Guideline: Separate your control keywords from the following opening bracket.</p><p>Control structures regulate the dynamic behaviour of a program, so the
keywords of control structures are amongst the most critical components
of a program. It&#x27;s important those keywords stand out clearly in the
source code and are distinguished from function calls.</p><p>To achieve this distinction, place a single space between a keyword and
the following bracket:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i=0; i &lt; NELEMENTS(name_array); ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for(i=0; i &lt; NELEMENTS(name_array); ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="64-subroutines-and-variables"></a>6.4 Subroutines and Variables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#64-subroutines-and-variables" title="Direct link to heading">#</a></h3><p>Guideline: Don&#x27;t separate subroutine or variable names from the following opening bracket.</p><p>Function or variable names shall be followed by an opening parenthesis
without any intervening spaces. This ensures that a function call is not
mistaken for a control structure.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">initialise();</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">initialise ();</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="65-line-lengths"></a>6.5 Line Lengths<a aria-hidden="true" tabindex="-1" class="hash-link" href="#65-line-lengths" title="Direct link to heading">#</a></h3><p>Guideline: Use 78-column lines.</p><p>These guidelines recommend that code be constrained to a width that
supports adherence to other guidelines in this document.</p><p>See also Â§<a href="#610-vertical-alignment">Â§6.10</a> â€” 6.13.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="66-indentation"></a>6.6 Indentation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#66-indentation" title="Direct link to heading">#</a></h3><p>Guideline: Use four-column indentation levels.</p><p>In experiments to measure the effectiveness of indentation as an aid to
program understanding, it was discovered that an indentation level
between 2 and 4 was most effective. Smaller and larger values were found
to be detrimental to the understandability of the program.</p><p>These guidelines mandate an indentation level of four columns.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="67-tabs"></a>6.7 Tabs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#67-tabs" title="Direct link to heading">#</a></h3><p>Guideline: Indent with spaces, not tabs.</p><p>Tabs do not appear the same when printed on different output devices, or
pasted into word processor documents, viewed on someone else&#x27;s tabspaced
editor, or prefixed with line numbers for code reviews or peer reviews.</p><p>Do not use tabs alone, or, even worse, intermixed with spaces.</p><p>Use spaces to ensure that indentation remains reliable, repeatable, and
transportable across viewing environments.</p><p>Note that this does not mean you cannot use the Tab key in your code
editor. Most editors have a setting that will insert spaces when the Tab
key is pressed. These Guidelines mandates that such editors are set to
insert four spaces and not the tab character.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="68-blocks"></a>6.8 Blocks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#68-blocks" title="Direct link to heading">#</a></h3><p>Guideline: Never place two statements on one line.</p><p>If two or more statements are placed on one line, each of them becomes harder to comprehend.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="69-chunking"></a>6.9 Chunking<a aria-hidden="true" tabindex="-1" class="hash-link" href="#69-chunking" title="Direct link to heading">#</a></h3><p>Guideline: Code in paragraphs.</p><p>Break the code into sequences that achieve a single task, with a single
empty line between each sequence.</p><p>Precede each sequence with a comment to further improve the
maintainability of the code. These comments need to explain why the code
is needed, not merely paraphrase what it&#x27;s doing.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="610-vertical-alignment"></a>6.10 Vertical Alignment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#610-vertical-alignment" title="Direct link to heading">#</a></h3><p>Guideline: Corresponding items shall be aligned vertically.</p><p>It&#x27;s often useful to align data in a table-like series of columns.
Consistent indentation can suggest equivalences in structure, usage, or
purpose.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* FEB = 2, MAR = 3, etc. */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum months</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    JAN = 1, FEB, MAR,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    APR,     MAY, JUN,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    JUL,     AUG, SEP,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    OCT,     NOV, DEC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div></div></div></div></div><p>Sequences of related variables shall be tabulated similarly:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">name   = standardise_name(name);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">age    = get_now_time() - birth_date;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">status = active;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="611-breaking-long-lines"></a>6.11 Breaking Long Lines<a aria-hidden="true" tabindex="-1" class="hash-link" href="#611-breaking-long-lines" title="Direct link to heading">#</a></h3><p>Guideline: Break long expressions before an operator.</p><p>Although it is common practice to break an expression after an operator
and continue the expression on the following line, indented by one level
(the idea being the operator acts as a continuation marker) there is a
problem: people rarely look at the right edge of code. Most semantic
hints such as keywords, appear on the left. Breaking the line <em>before</em>
an operator is a cleaner solution. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">step = step</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       + radial_velocity * elapsed_time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       + orbital_velocity * (phase + phase_shift)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       - DRAG_COEFF * altitude</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ;</span></div></div></div></div></div><p>The semicolon on its own indented to the same column as the continued
expression informs the reader the expression is complete, as he or she
scans down the leading operators.</p><p>Continued lines should not be simply indented to the next indentation
level, they should be indented to the starting column of the expression
to which they belong.</p><p>So don&#x27;t do this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON_CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">step = step</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           + radial_velocity * elapsed_time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           + orbital_velocity * (phase + phase_shift)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           - DRAG_COEFF * altitude</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           ;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="612-breaking-by-precedence"></a>6.12 Breaking by Precedence<a aria-hidden="true" tabindex="-1" class="hash-link" href="#612-breaking-by-precedence" title="Direct link to heading">#</a></h3><p>Guideline: Always break a long expression at the operator of the lowest possible precedence.</p><p>The example in 6.11 shows that when breaking an expression across
several lines, each line should be broken before a low-precedence
operator. Breaking at higher precedence will encourage an unwary reader
to misunderstand the computation. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">step = step + radial_velocity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            * elapsed_time + orbital_velocity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            * (phase + phase_shift) - DRAG_COEFF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            * altitude</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ;</span></div></div></div></div></div><p>This suggests that additions and subtractions happen before the multiplication.</p><p>If you need to break on an operator of less-than-minimal precedence,
indent the broken line one additional level relative to the start of the
expression, like so:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">step = step</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       + radial_velocity * elapsed_time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       + orbital_velocity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           * (phase + phase_shift)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       - DRAG_COEFF * altitude</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="613-assignments"></a>6.13 Assignments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#613-assignments" title="Direct link to heading">#</a></h3><p>Guideline: Break long assignments before the assignment operator.</p><p>For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">predicted_val</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    = average + predicted_change * fudge_factor;</span></div></div></div></div></div><p>If the righthand side of the assignment won&#x27;t fit on one line, break it
again at a low-precedence operator, as suggested in <a href="#612-breaking-by-precedence">Para. 6.12</a>.</p><p>For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">predicted_val</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    = (minimum + maximum) / 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         + predicted_change * max(fudge_factor, local_epsilon);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="614-automated-layout"></a>6.14 Automated Layout<a aria-hidden="true" tabindex="-1" class="hash-link" href="#614-automated-layout" title="Direct link to heading">#</a></h3><p>Guideline: Enforce your chosen layout style automatically.</p><p>In the long term, the coding team should be trained to code in a
consistent, rational, and readable style. Time and commitment to
accomplish this isn&#x27;t always available. A reasonable compromise is to
prescribe a standard code-formatting tool that must be applied to all
code before it&#x27;s committed, reviewed, or otherwise displayed in public.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="7-c-implementation"></a>7 C IMPLEMENTATION<a aria-hidden="true" tabindex="-1" class="hash-link" href="#7-c-implementation" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="71-header-files"></a>7.1 Header Files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#71-header-files" title="Direct link to heading">#</a></h3><p>Guideline: Ensure header files are idempotent.</p><p>Use a macro guard in header files to implement idempotence:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* FILE: header.h */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#ifndef HEADER_H</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define HEADER_H</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">... /* body of .h file */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div></div></div></div></div><p>The macro name should be the name of the file with all full stops,
non-alphabetic, and non-digit characters replaced by underscores. Never begin
a macro name with an underscore character.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="72-header-file-content"></a>7.2 Header File Content<a aria-hidden="true" tabindex="-1" class="hash-link" href="#72-header-file-content" title="Direct link to heading">#</a></h3><p>Guideline: Do not define functions or objects in header files.</p><p>Header file content should fall into roughly three types:</p><ul><li>External declarations and function prototypes</li><li>Structure definitions, and structure <code>typedef</code> declarations</li><li><code>#define</code>d preprocessor directives for global use, and <code>typedef</code>
declarations for non-structure types</li></ul><p>Functions or objects should not be defined in a header file.</p><p>Reference: MISRA-C:2004 Rule 8.5.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="73-goto"></a>7.3 Goto<a aria-hidden="true" tabindex="-1" class="hash-link" href="#73-goto" title="Direct link to heading">#</a></h3><p>Guideline: Do not use the <code>goto</code> statement.</p><p>The <code>goto</code> is never necessary, and in practice it is almost always easy to
write code without it.</p><p>References: Ref 7 Rule 14.4.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="74-functions"></a>7.4 Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#74-functions" title="Direct link to heading">#</a></h3><p>There are several guidelines for function.</p><p>7.4.1 Functions should be as short as practicable. Excluding the unit header, a function should span at most two screens.</p><p>7.4.2 The function name shall be unique and describe its purpose. See <a href="#8.1.3.2">Para. 8.1.3.2</a>.</p><p>7.4.3 Use the type-qualifier <code>const</code> for function parameters to indicate that the function does not change those values. Do this in both the definitions and the declarations. This does not apply to scalar parameters.</p><p>7.4.4 The brace <code>}</code> which terminates the block that provides the code for a function shall be followed by a comment of the form:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* End of function function-name */</span></div></div></div></div></div><p>and shall appear on the same line as that block delimiter.</p><p>7.4.5 All function names within a separately compiled group of elements should be prefixed with a short mnemonic. For example, <code>hdc_</code> (to denote hard disc controller), particularly when more than one task is present on the system.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="75-null-pointers"></a>7.5 Null Pointers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#75-null-pointers" title="Direct link to heading">#</a></h3><p>For each pointer type, C defines a special pointer value, the null
pointer, that is guaranteed not to point to any object or function of
that type. The <em>null pointer constant</em> used for representing null
pointers in source code involves the integer 0, and many machines
represent null pointers internally as a word with all bits zero, but the
second fact is <em>not</em> guaranteed by the language.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="751-the-null-macro"></a>7.5.1 The NULL Macro<a aria-hidden="true" tabindex="-1" class="hash-link" href="#751-the-null-macro" title="Direct link to heading">#</a></h4><p>Guideline: Use the <code>NULL</code> macro instead of 0 in pointer contexts.</p><p>So that a program&#x27;s use of null pointers can be made more explicit, a
standard pre-processor macro, <code>NULL</code>, is defined, having as its value a
null pointer constant. Using the macro instead of an unadorned 0 in
pointer contexts indicates a special value for a pointer is being used.</p><p>References: K&amp;R2 Â§5.4 p. 102</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="752-pointer-arguments"></a>7.5.2 Pointer Arguments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#752-pointer-arguments" title="Direct link to heading">#</a></h4><p>Guideline: A null pointer shall be cast to its correct type when used as
an argument to a function call.</p><p>According to the language definition, an &quot;integral constant expression
with the value 0&quot; in a pointer context is converted into a null pointer
at compile time, and will generate the correctly typed null pointer
value. This applies when using the <code>NULL</code> macro as well. So the following
are perfectly legal:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">char *p = NULL;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (p != NULL)</span></div></div></div></div></div><p>However, an argument passed to a function is not necessarily
recognisable as a pointer context, and the compiler may not recognise an
unadorned 0 (or the <code>NULL</code> macro) as a null pointer. In this case, an
explicit cast may be required. For example, the UNIX system call <code>execl</code>
takes a variable-length, null pointer-terminated list of character
pointer arguments and is correctly called like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">execl(&quot;/bin/sh&quot;, &quot;sh&quot;, &quot;-c&quot;, &quot;date&quot;, (char *)NULL);</span></div></div></div></div></div><p>Without the <code>(charÂ *)</code> cast on the last argument, the compiler would not
know to pass a null pointer and would pass an integer 0 instead.</p><p>When a function prototype is in scope, argument passing becomes an
&quot;assignment context&quot; and most casts may be safely omitted.</p><p>Function prototypes cannot provide the types for variable arguments in
variable-length argument lists, so casts are still required.</p><p>As explained above, although null pointer casts of function arguments
are necessary only where there is no prototype in scope, or when passed
as a variable argument in a varargs function call, it is safest to
properly cast all null pointers in function calls.</p><p>References: K&amp;R2 Â§7.10 p. 207, Â§A7.17 p. 209; ANSI Â§3.2.2.3; ISO
Â§6.2.2.3</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="753-function-pointers"></a>7.5.3 Function Pointers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#753-function-pointers" title="Direct link to heading">#</a></h4><p>Guideline: A function pointer shall not be converted to type voidÂ *.</p><p>A <code>voidÂ *</code> is guaranteed to hold only object (i.e., data) pointers;
converting a function pointer to type <code>voidÂ *</code> is not portable.</p><p>It is guaranteed, however, that all function pointers can be
interconverted, as long as they are converted back to an appropriate
type before calling. Therefore, you can pick any function type as a
generic function pointer (usually <code>intÂ (*)()</code> or <code>voidÂ (*)()</code>).</p><p>References: ANSI Â§3.1.2.5, Â§3.2.2.3, 3.3.4; ISO Â§6.1.2.5, Â§6.2.2.3,
Â§6.3.4</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="76-preprocessor"></a>7.6 Preprocessor<a aria-hidden="true" tabindex="-1" class="hash-link" href="#76-preprocessor" title="Direct link to heading">#</a></h3><p>7.6.1 Guideline: In the definition of a function-like macro each instance of a parameter shall be enclosed in parentheses unless it is used as the operand of <code>#</code> or <code>##</code>.</p><p>Using parentheses protects any low-precedence operators in the actual
arguments from the rest of the macro expansion.</p><p>References: MISRA-C:2004 Rule 19.10.</p><p>7.6.2 Guideline: C macros shall expand only to a braced initialiser, a constant, a parenthesised expression, a type qualifier, a storage class specifier, or a do-while-zero construct.</p><p>Any other use of <code>#define</code> could lead to unexpected behaviour or
hard-to-read code.</p><p>For complete statements in a macro body, the do-while-zero construct is
the only permitted mechanism. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define READ_TIME_32() \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">do \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    DISABLE_INTERRUPTS(); \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    time_now = (uint32_t)TIMER_HI &lt;&lt; 16; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    time_now = time_now | (uint32_t)TIMER_LO; \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ENABLE-INTERRUPTS(); \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} while (0)</span></div></div></div></div></div><p>Note that the semicolon <em>must</em> be omitted from the end of the macro body.</p><p>References: MISRA-C:2004 Rule 19.4.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="77-booleans"></a>7.7 Booleans<a aria-hidden="true" tabindex="-1" class="hash-link" href="#77-booleans" title="Direct link to heading">#</a></h3><p>7.7.1 <a target="_blank" rel="noopener noreferrer" name="7.7.1"></a> Defining TRUE and FALSE
Guideline: Define pre-processor macros or enumeration constants for true
and false values, which evaluate to 1 and 0.</p><p>The choice between <code>#defines</code> and enumeration constants for the true and
false values is arbitrary, but consistency shall be maintained within a
program or project. Use any of:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define TRUE 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define FALSE 0</span></div></div></div></div></div><p>or</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum Bool {FALSE, TRUE};</span></div></div></div></div></div><p>or</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef enum {FALSE, TRUE} Bool;</span></div></div></div></div></div><p>And also:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef int Bool;</span></div></div></div></div></div><p>or</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef char Bool;</span></div></div></div></div></div><p>See also <a href="#772-use-of-true-and-false">Â§7.7.2</a>; <a href="#82-booleans">Â§8.2</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="772-use-of-true-and-false"></a>7.7.2 Use of TRUE and FALSE<a aria-hidden="true" tabindex="-1" class="hash-link" href="#772-use-of-true-and-false" title="Direct link to heading">#</a></h4><p>Guideline: Only assign TRUE and FALSE to a Boolean variable, never use
them in comparisons.</p><p>Even though any nonzero value is considered true in C, this only applies
&quot;on input&quot;, i.e., where a Boolean value is expected. When a Boolean
value is generated by a built-in operator, such as <code>==</code>, <code>!=</code>, and <code>&lt;=</code>, it
is guaranteed to be 1 or 0. Therefore, a test like</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if ((a==b) == TRUE)</span></div></div></div></div></div><p>would work as expected, but is pointless. Generally, explicit tests
against TRUE and FALSE are inappropriate, and, unlike the built-in
operators, some library functions (notably <code>isupper</code>, <code>isalpha</code>, etc.)
return, on success, a nonzero value that is <em>not</em> necessarily 1, so
comparing their return values against a single value, such as TRUE, is
risky and likely not to work. The above should be written:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (a==b)</span></div></div></div></div></div><p>See also <a href="#7.7.1">Â§7.7.1</a>; <a href="#82-booleans">Â§8.2</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="78-pointer-declarations"></a>7.8 Pointer Declarations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#78-pointer-declarations" title="Direct link to heading">#</a></h3><p>Guideline: When declaring or defining a pointer variable, always ensure
there is no whitespace between the <code>*</code> and the identifier.</p><p>C&#x27;s declarations come in two parts: a base type and a <em>declarator</em>. The
declarator may also contain the characters <code>*</code>, <code>[]</code>, and <code>()</code>, saying
whether the name is a pointer to, array of, or function returning the
base type, or some combination.</p><p>In</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">char *pc;</span></div></div></div></div></div><p>the base type is <code>char</code>, the identifier is <code>pc</code>, and the declarator is <code>*pc</code>;
this tells us that <code>*pc</code> is a <code>char</code>. The syntax of the declaration for a
variable mimics the syntax of expressions in which the variable might
appear and is what &quot;declaration mimics use&quot; means.</p><p>If we write:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">char* p1, p2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">char * p3, p4;</span></div></div></div></div></div><p>only one pointer variable is being declared, on each line, despite what
the whitespace might suggest. Both forms invite mistakes and are
confusing.</p><p>The correct way to declare them would clearly show that only <code>p1</code> and <code>p3</code>
are pointers:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">char *p1, p2;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">char *p3, p4;</span></div></div></div></div></div><p>References: Ref 2, Â§5.1; Ref 6 Q1.5, Q1.21.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="8-naming-conventions"></a>8 NAMING CONVENTIONS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#8-naming-conventions" title="Direct link to heading">#</a></h2><p>Guideline: Name all objects.</p><p>It is possible to create an enumeration without specifying an identifier:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum {NAME, PARENS, BRACKETS};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* and later */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int token_type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">. . .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">token_type = PARENS;</span></div></div></div></div></div><p>But it is clearer to name it and declare any object that will hold its values of that type:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum tokens {NAME, PARENS, BRACKETS\];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* later */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">enum tokens token_type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">. . .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">token_type = PARENS;</span></div></div></div></div></div><p>Compilers need not check that what is stored in such a variable is a
valid value for the enumeration, but they offer the chance of checking
and in many cases are better than <code>#define</code>s. Also, a debugger may be
able to print values of enumeration variables in their symbolic form. It
is also clear from the code what the author intended.</p><p>It would also be clearer to declare the type using <code>typedef</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef enum {NAME, PARENS, BRACKETS} Token_type;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Token_type token_type;</span></div></div></div></div></div><p>References: Ref 2 Â§2.3, Â§A.8.4</p><p>In the rules below, <code>*</code> means zero or more repetitions of the preceding
item, and <code>?</code> means 0 or 1 instances.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="81-identifiers"></a>8.1 Identifiers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#81-identifiers" title="Direct link to heading">#</a></h3><p>8.1.1 Guideline: No identifier shall begin with an underscore.
The reason for this guideline is to prevent creating an identifier that
is already in use by the implementation. If you begin an identifier with
an underscore, at best, you will get &quot;multiply defined&quot; errors. At
worst, it will quietly replace one of the implementation&#x27;s symbols and
break everything.</p><p>It is possible to break this Guideline and use identifiers with
underscores safely within certain namespaces, but the rules are complex
and it is simpler &amp;emdash; and safer &amp;emdash; simply not to use an underscore as
the first character of any identifier.</p><p>References: Ref 6, Q1.29 p. 23; ISO Â§7.1.3.</p><p>8.1.2  Guideline: Identifiers (internal and external) and pre-processor macro names shall not rely on the significance of more than 31 characters.</p><p>Although some implementations may make at least the first 31 characters
of internal identifiers significant, it is safer to restrict all
identifiers (including pre-processor macro names) to a maximum of 31
characters.</p><p>Reference: Ref 7 Rule 5.1; Ref 2 Â§A.2.3.</p><p>8.1.3 Guideline: Use grammatical templates when forming identifiers and function names.</p><p>8.1.3.1 Variables</p><p>Variables should be named according to the values they will store and as
specifically as possible.</p><p>The recommended grammar rule is very simple:</p><p>Â Â Â Â <em>variable</em> â†’ [<em>adjective</em> _ ]* <em>noun</em></p><p>The choice of nouns and adjectives is critical. The nouns in particular
should indicate what the variable does in terms of the problem domain,
not in terms of the implementation. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">next_client           /* not: next_elem */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prev_appointment      /* not: prev_elem */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">estimated_net_worth   /* not: value */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">next_node             /* not: node */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">root_node             /* not: root */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">final_total           /* not: sum */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cumulative_total      /* not: partial_sum */</span></div></div></div></div></div><p>Note, however, it is often acceptable to name parameters in short, tight
functions, using the normal C idioms:</p><p>Â Â Â Â <code>s</code> to denote a string<br>
Â Â Â Â <code>c</code> to denote a <code>char</code><br>
Â Â Â Â <code>i</code> to denote a loop index<br></p><p>8.1.3.2 <a target="_blank" rel="noopener noreferrer" name="8.1.3.2"></a> Functions
A suitable grammatical rule for forming function names is:</p><p>Â Â Â Â <em>function</em> â†’ <em>imperative_verb</em> [ _ <em>adjective</em>]? _ <em>noun</em> _ <em>preposition</em><br>
Â Â Â Â Â Â Â Â | <em>imperative_verb</em> [ _ <em>adjective</em>]? _ <em>noun</em> _ <em>participle</em><br>
Â Â Â Â Â Â Â Â | <em>imperative_verb</em> [ _ <em>adjective</em>]? _ <em>noun</em></p><p>This will give function names such as:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">get_record                      /* imperative_verb noun */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">get_record_for                  /* imperative_verb noun preposition */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">eat_cookie                      /* imperative_verb noun */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">eat_previous_cookie             /* imperative_verb adjective noun */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">build_profile                   /* imperative_verb noun */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">build_execution_profile         /* imperative_verb adjective noun */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">build_execution_profile_using   /* imperative_verb adjective noun */</span></div></div></div></div></div><p>The reason for prepositions is that they can create variables that read
far more naturally and can eliminate the need for additional comments:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config_options = get_record_for(next_client);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">build_execution_profile_using(next_client, option);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="82-booleans"></a>8.2 Booleans<a aria-hidden="true" tabindex="-1" class="hash-link" href="#82-booleans" title="Direct link to heading">#</a></h3><p>Guideline: Name Booleans after their associated test.</p><p>Booleans should be named for the properties or predicates they test, in
such a way that the resulting conditional expression reads naturally.
This means they will usually begin with <code>is_</code> or <code>has_</code>, but not always.
For example, consider this code fragment:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (is_valid(next_record) &amp;&amp; !loading_finished)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    while (metadata_available_for(next_record))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        push(metadata, get_metadata_for(next_record));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (has_end_tag(next_record)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    has_found_bad_record = TRUE;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Note how the use of carefully constructed identifiers, and function
names eliminates the need for comments.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="83-pointer-variables"></a>8.3 Pointer Variables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#83-pointer-variables" title="Direct link to heading">#</a></h3><p>Guideline: Mark variables that store pointers.</p><p>To obviate using a pointer variable in a context when it should be
dereferenced, and deferencing a pointer when it shouldn&#x27;t be, either
suffix the variable name with <code>_p</code>, prefix it with <code>p</code>, or provide some
other indication that it is a pointer.</p><p>By conforming to this guideline, you can ensure a coder understands that
he or she is dealing with a pointer. This coding practice would make it
clear that it is likely a <code>*</code> should appear before a variable named in
such a way:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* calculate how much wider than text the width (columns) is */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gap = *p_col_opt - strlen(text);</span></div></div></div></div></div><p>and this would look suspicious:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gap = p_col_opt - strlen(text);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="84-arrays"></a>8.4 Arrays<a aria-hidden="true" tabindex="-1" class="hash-link" href="#84-arrays" title="Direct link to heading">#</a></h3><p>Guideline: Name arrays in the plural.</p><p>Arrays are usually ordered sequences of multiple values, and are mostly
processed collectively or iteratively, so it makes sense to name them in
the plural, after the group of items they store:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">char *filenames[FILENAMES_MAX] = {NULL}; /* initialise all to null pointer */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* And later... */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i &lt; NELEMENTS(filenames) &amp;&amp; filenames[i] != NULL; ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    puts(filenames[i]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="85-multiword-identifiers"></a>8.5 Multiword Identifiers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#85-multiword-identifiers" title="Direct link to heading">#</a></h3><p>Guideline: Maintain consistency in the use of multiword identifiers.</p><p>There are two main types of naming convention prevalent in naming
variables containing multi-words: Inter Caps and underscores.</p><p>Underscores impose a visual gap between the words in an identifier, and
therefore are the closest to the default natural-language word
separator: the space.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pdf_header_signature_inplace_str_token</span></div></div></div></div></div><p>On the other hand, use of Inter Caps is very common:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pdfHeaderSignatureInplaceStrToken</span></div></div></div></div></div><p>Choose a style, and ensure it is used consistently throughout the code.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="86-abbreviations"></a>8.6 Abbreviations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#86-abbreviations" title="Direct link to heading">#</a></h3><p>Guideline: Abbr idents by prefx.</p><p>If you choose to abbreviate an identifier, abbreviate it by retaining
the start of each word. Compare these two code fragments:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i &lt; NELEMENTS(orig_strs); ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    len = strlen(orig_strs[i]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (len &gt; UPPER_LIM)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        continue;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    max_len = MAX(max_len, len);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i &lt; NELEMENTS(rgnl_strgs); ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    len = strlen(rgnl_strgs[i]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (lngh \&gt; UPPR_LMT)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    continue;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    max_lngh = MAX(max_lngh, lngh);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>When abbreviating identifiers, it is acceptable to keep the last
consonant (<code>orig_strs</code>, <code>prefx</code>, <em>etc.</em>), especially if that consonant is a
plural suffix.</p><p>This rule need not apply to identifiers that are well-known standard
abbreviations. In this case, it&#x27;s better to use the &quot;native&quot;
abbreviation strategy:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ctrl_char = ASCII_ESC; /* ASCII_ESC is a macro */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">connection_Mbps = get_bitrate() / 1e6;</span></div></div></div></div></div><p><code>Ctrl</code> appears on most keyboards. <code>Mbps</code> is a standard unit.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="87-ambiguous-abbreviations"></a>8.7 Ambiguous Abbreviations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#87-ambiguous-abbreviations" title="Direct link to heading">#</a></h2><p>Guideline: Abbreviate only when the meaning remains unambiguous.</p><p>Abbreviation is a form of visual hashing, and can be useful in reducing
the length of identifiers, which then can be recognised as a single
visual chunk. Unfortunately, it can suffer from collisions.</p><p>Some ambiguities are:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">temp       /* temporary or temperature? */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">term_val   /* terminal value or termination valid? */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dev        /* device or deviation? */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">no         /* number or no? */</span></div></div></div></div></div><p>There are exceptions. Abbreviating to a single character can be appropriate:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">a = f / m;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">v = u + a*t;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s = u*t + 0.5*a*t*t;</span></div></div></div></div></div><p>Even single letter iterator variables - <code>i</code>, <code>j</code>, <code>k</code>, <code>n</code>, <code>x</code>, <code>y</code>, <code>z</code> - are
acceptable in nested loops:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* squeeze.c: delete each char in s1 which is in s2 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void squeeze(char s1[], const char s2[])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int i, j, k;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (i = k = 0; s1[i] != &#x27;\0&#x27;; i++)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        for (j = 0; s2[j] != &#x27;\0&#x27; &amp;&amp; s2[j] != s1[i]; j++)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (s2[j] == &#x27;\0&#x27;) /* end of string - no match */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            s1[k++] = s1[i];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    s1[k] = &#x27;\0&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} /* squeeze */</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="88-ambiguous-names"></a>8.8 Ambiguous Names<a aria-hidden="true" tabindex="-1" class="hash-link" href="#88-ambiguous-names" title="Direct link to heading">#</a></h3><p>Guideline: Avoid using inherently ambiguous words in names.</p><p>Abbreviations are not the only cause of ambiguities in identifiers. Some
complete words have one or more homonyms.</p><p>One of the worst offenders in this regard is &quot;last&quot;.</p><p><code>last_record</code> might mean the record that was most recently processed (call
it <code>prev_record</code>), or to the ultimate record in a list (call it
<code>final_record</code>).</p><p>&quot;set&quot; is another problem. <code>get_set()</code> could mean get a collection of
values (call it <code>retrieve_collection()</code>), or it might test whether the
&quot;get&quot; option has been enabled (call it <code>get_is_enabled()</code>), or it might
mediate both fetch and store operations of some value (call it
<code>fetch_or_store()</code>).</p><p>Avoid these words:</p><ul><li><p>&quot;left&quot; (the direction <em>vs</em> what remains)</p></li><li><p>&quot;right&quot; (the other direction <em>vs</em> being correct vs an entitlement)</p></li><li><p>&quot;no&quot; (the negative <em>vs</em> the abbreviation for number)</p></li><li><p>&quot;abstract&quot; (theoretical <em>vs</em> prÃ©cis <em>vs</em> to summarise)</p></li><li><p>&quot;contract&quot; (make smaller <em>vs</em> legal agreement)</p></li><li><p>&quot;record&quot; (an extreme outcome <em>vs</em> a data aggregation vs to log)</p></li><li><p>&quot;second&quot; (the ordinal position <em>vs</em> the unit of time)</p></li><li><p>&quot;close&quot; (near <em>vs</em> to shut)</p></li><li><p>&quot;bases&quot; (more than one base <em>vs</em> more than one basis)</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="89-general-naming-conventions"></a>8.9 General Naming Conventions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#89-general-naming-conventions" title="Direct link to heading">#</a></h3><p>Guideline: Use K&amp;R2 style use of case.</p><p>The Kernighan &amp; Ritchie convention is:</p><table><thead><tr><th>Convention</th><th>Description</th></tr></thead><tbody><tr><td>UPPERCASE_WITH_UNDERSCORE</td><td>Macro names and enumeration constants</td></tr><tr><td>Capitalised</td><td>typedef names</td></tr><tr><td>lowercase</td><td>other objects</td></tr></tbody></table><p>For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef enum {FALSE,TRUE } Bool; /* Capitalised typedef, uppercase enum constants */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define LOWER 0                  /* A macro called LOWER */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int fahr;                        /* An int variable called fahr */</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="9-documentation"></a>9 DOCUMENTATION<a aria-hidden="true" tabindex="-1" class="hash-link" href="#9-documentation" title="Direct link to heading">#</a></h2><p>This document has already described how unit and element headers should
be documented (See <a href="#5">Section 5</a>). This section describes guidelines for
documenting the source code.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="91-algorithmic-documentation"></a>9.1 Algorithmic Documentation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#91-algorithmic-documentation" title="Direct link to heading">#</a></h3><p>Guideline: Use full-line comments to explain the algorithm.</p><p><a href="#69-chunking">Para. 6.9</a> mentions coding in paragraphs, including advice on prefixing
each paragraph with a single-line comment which explains at high level
what the associated paragraph contributes to the overall process
implemented by the code. If all the paragraph comments were to be
extracted, they should summarise the algorithm by which the code
performs its task. Indeed, the use of a tool to perform such processing
is recommended.</p><p>Keep each such comment strictly to a single line. Any more than that
interrupts the code excessively, making it harder to follow. If the
paragraph is doing something too complicated to be explained in a single
line, that is a sign that the code either needs to be split into several
paragraphs, or else refactored out into a function (which can then be
given a more expansive block comment).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="92-elucidating-comments"></a>9.2 Elucidating Comments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#92-elucidating-comments" title="Direct link to heading">#</a></h3><p>Guideline: Use end-of-line comments to point out subtleties and
oddities.</p><p>The guidelines in this document should help you write code that is
self-documenting, but such a thing is in the eye of the original author,
and comprehensibility can suffer particularly badly when the code
incorporates jargon from the problem domain. Terms that were extremely
familiar to the original designers and implementers might mean nothing
to those who later have to maintain the source. For example, you could
inherit code like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-COMPLIANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">QFETM_Func_p QFETM_func_p;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (QFETM_func_p = get_GET( ))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    make_futtock(QFETM_func_p);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>In which case, trailing comments are appropriate:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">QFETM_Func_p QFETM_func_p; /* stores Quantum Field Effect Transfer Mode</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Build futtock representation if remote data are available . . . */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (QFETM_func_p = get_GET( ))           /* instead of get_POST( ) */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    make_futtock(QFETM_func_p); /* futtock: a rib of a ship&#x27;s frame */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="93-defensive-documentation"></a>9.3 Defensive Documentation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#93-defensive-documentation" title="Direct link to heading">#</a></h3><p>Guideline: Comment anything that has puzzled or tricked you.</p><p>An in-line comment is appropriate whenever you encounter a subtle bug,
or whenever you write some subtle code. &quot;Subtle&quot; has a very precise
definition here: it means that you either had to look up something in a
manual, or had to spend more than five seconds thinking about it before
you understood its syntax or semantics.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="94-indicative-documentation"></a>9.4 Indicative Documentation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#94-indicative-documentation" title="Direct link to heading">#</a></h3><p>Guideline: Consider whether it&#x27;s better to rewrite than to comment.</p><p>The need to leave hints in the code indicates that the code itself is in
need of reworking. Doing so may remove the need for the trailing
comment, or enable it to be re-written so it&#x27;s more to the point.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="95-proofreading"></a>9.5 Proofreading<a aria-hidden="true" tabindex="-1" class="hash-link" href="#95-proofreading" title="Direct link to heading">#</a></h3><p>Guideline: Check the spelling, syntax, and sanity of your documentation.</p><p>To be effective, documentation must communicate effectively. It must be
without distractions (like spelling mistakes), it must be comprehensible
(i.e., syntactically correct), it must be unambiguous, and it must make
sense. So <em>read</em> it after it&#x27;s written, or, better still, have someone
who&#x27;s unfamiliar with the code read through it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10-library-functions"></a>10 LIBRARY FUNCTIONS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10-library-functions" title="Direct link to heading">#</a></h2><p>Guideline: Use C&#x27;s Standard Library functions wherever possible.</p><p>If C provides a way to solve your problem with a Standard Library
function, then it makes no sense to reinvent it. It&#x27;s likely that
function is faster and better debugged than anything you&#x27;ll have time to
write yourself.</p><p>Bear in mind, some of C&#x27;s built-in functions are complex, with subtle
behaviour, so there are right and wrong ways to use them. Note also that
the C Standard allows any function declared in a header to be
additionally implemented as a macro defined in the header.</p><p>Here are some guidelines.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="101-asserth"></a>10.1 &lt;assert.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#101-asserth" title="Direct link to heading">#</a></h3><p>Guideline: Use assert only in development code. The sole purpose of the
header <code>&lt;assert.h&gt;</code> is to provide a definition of the macro assert. The
macro is used to enforce assertions at critical places within your
program:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">assert(0 &lt;= idx &amp;&amp; idx &lt; sizeof a / sizeof a[0]);</span></div></div></div></div></div><p>If the assertion is false, a suitably revealing message is written to
the standard error stream and the program terminates abnormally by
calling <code>abort</code>.</p><p>However, such behaviour should be used only in development code and
<em>not</em> in production code. Some form of error recovery is always
preferred.</p><p>See also <a href="#10133-abort">Â§10.13.3</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="102-ctypeh"></a>10.2 &lt;ctype.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#102-ctypeh" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1021-input-functions"></a>10.2.1 Input Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1021-input-functions" title="Direct link to heading">#</a></h4><p>Guideline: Use the functions declared in <code>&lt;ctype.h&gt;</code> to test or alter
characters that you read in with <code>fgetc()</code>, <code>getc()</code>, <code>getchar()</code>, all
declared in <code>&lt;stdio.h&gt;</code>.</p><p>If you store a value returned by any of those functions before you test
it, declare the object to have type <code>int</code>. The functions work properly
only for the value <code>EOF</code>, defined in <code>&lt;stdio.h&gt;</code>, and values that type
<code>unsigned char</code> can represent.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1022-letter-codes"></a>10.2.2 Letter Codes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1022-letter-codes" title="Direct link to heading">#</a></h4><p>Guideline: Do not assume letter codes are adjacent.</p><p>Write your code to be independent of the underlying character set used
by the compiler.</p><p>For example, in the ASCII character set, it happens that letter codes
are adjacent, but in the EBCDIC character set they are not.</p><p><code>&lt;ctype.h&gt;</code> defines a family of functions that provide tests and
conversions that are independent of character set. Use those functions
instead of your own. For example, the following assumes ASCII and that
upper case and lower case letters are a fixed distance apart:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* lower: convert c to lower case; ASCII only */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int lower(int c)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (&#x27;A&#x27; &lt;= c &amp;&amp; c &lt;= &#x27;Z&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return c + &#x27;a&#x27; -- &#x27;A&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return c;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>It will not work for the EBCDIC character set. <code>tolower(c)</code> will work,
whatever character set is used.</p><p>The issue of the underlying character set has implications for number
conversion, for example converting a hexadecimal number in any locale.
See the sample code in <a href="#17-useful-macro-and-function-examples">Section 17</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="103-errnoh"></a>10.3 &lt;errno.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#103-errnoh" title="Direct link to heading">#</a></h3><hr><p>Guideline: Do not use <code>errno</code>.</p><p>The C Standard leaves much unsaid about the errors that can be reported,
and even less about the values of any error codes or the macro names
used to determine those values. Behaviours are explicitly stated in the
C Standard, so if you call <code>sqrt(-1.0)</code> you will know <code>errno</code> contains the
value <code>EDOM</code>. However, call <code>fabs(x)</code> and all bets are off. If a function
does not document it changes <code>errno</code>, it can do so silently (although no
function will ever set it to 0). Do not use <code>errno</code>.</p><p>Reference: Ref 5 Chapter 3; Ref 7 Rule 20.5.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="104-floath"></a>10.4 &lt;float.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#104-floath" title="Direct link to heading">#</a></h3><hr><p>The three pitfalls of floating-point arithmetic are overflow, underflow,
and significance loss. These Guidelines describe ways to use the macros
defined in <code>float.h</code> to perform double arithmetic more safely. The
functions in the following examples are the common maths functions
declared in <code>math.h</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1041-overflow"></a>10.4.1 Overflow<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1041-overflow" title="Direct link to heading">#</a></h4><p>Guideline: To avoid overflow, make sure that no value ever exceeds
<code>DBL_MAX</code> in magnitude.</p><p>To conform to this guideline, you cannot simply write:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (DBL_MAX &lt; fabs(y)) /* SILLY TEST */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">. . .</span></div></div></div></div></div><p>By the time you&#x27;ve made the test, it&#x27;s too late.</p><p>A more sensible test might be:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (x &lt; log(DBL_MAX))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    y = exp(x);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">. . . /* HANDLE OVERFLOW */</span></div></div></div></div></div><p>To avoid computing <code>log(DBL_MAX)</code>, use a related macro, for example,</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (x &lt;= FLT_MAX_10_EXP)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    y = pow(10, x);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    . . . /* HANDLE OVERFLOW */</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1042-underflow"></a>10.4.2 Underflow<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1042-underflow" title="Direct link to heading">#</a></h4><p>Guideline: To avoid underflow, make sure that no value ever goes below
<code>DBL_MIN</code> in magnitude.</p><p>You can make the following test :</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (fabs(y) &lt; DBL_MIN)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">. . .    /* UNDERFLOW HAS OCCURRED */</span></div></div></div></div></div><p>Although not as silly as the corresponding comparison between <code>DBL_MAX</code>,
the test is performed only after any damage has been done.</p><p>You can make the corresponding tests:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (log(DBL_MIN) &lt;= x)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   y = exp(x);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   . . . /* HANDLE UNDERFLOW */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (FLT_MIN10_EXP &lt;= x)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    y = pow(10, x);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    . . . /* HANDLE UNDERFLOW */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (FLT_MIN_EXP &lt; n)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   y = ldexp(1.0, n);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   . . . /* HANDLE UNDERFLOW */</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1043-significance-loss"></a>10.4.3 Significance Loss<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1043-significance-loss" title="Direct link to heading">#</a></h4><p>Guideline: Where possible, perform a check when adding a small magnitude
to a large one.</p><p>Significance loss occurs when you subtract two values that are nearly
equal. Nothing can save you from such a fate except careful analysis of
the problem before you write code. However, you can protect against a
subtler form of significance loss â€” adding a small magnitude to a
large one.</p><p>So, to test, for example, whether adding <code>x</code> to <code>y</code> captures at least three
decimal digits of significance from <code>y</code> (assuming both are positive),
write:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (x &lt; y * DBL_EPSILON * 1.0E+03)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    . . . /* HANDLE SIGNIFICANCE LOSS */</span></div></div></div></div></div><p>Note that <code>&lt;float.h&gt;</code> does not contain some key ingredient for writing
highly portable code.</p><p>References: Plauger Chapter 4.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="105-limitsh"></a>10.5 &lt;limits.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#105-limitsh" title="Direct link to heading">#</a></h3><p>Guideline: Wherever possible, use the macros provided in <code>&lt;limits.h&gt;</code> to
test the execution environment. Do not do experiments on the
pre-processor.</p><p>Preprocessor arithmetic need not model that of the execution
environment. Although the translator must closely model the execution
environment, it can largely define its own environment for the
arithmetic within <code>#if</code> directives.</p><p>The tradition in C is that scalar data types are represented in ways
natural to each computer architecture. <code>int</code> is particularly elastic. It
wants to be a size that supports efficient computation, at least within
broad limits. That is great for efficiency, but a real nuisance for
portability.</p><p><code>&lt;limits.h&gt;</code> captures many important properties that can change across
architectures, and it deals exclusively with integer types. When similar
data were added for floating point types, the Standards committee
decided not to include them in <code>&lt;limits.h&gt;</code>. Instead, they added them to
<code>&lt;float.h&gt;</code>. They could have renamed <code>&lt;limits.h&gt;</code> to <code>&lt;integer.h&gt;</code>, but
they elected not to do so.</p><p>All the macros defined in <code>&lt;limits.h&gt;</code> are testable within <code>#if</code>
directives, so rather than use execution environment-type expressions,
include <code>&lt;limits.h&gt;</code> and test the values of the macros it provides. For
example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;assert.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;limits.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#if VAL_MIN &lt; LONG_MIN || LONG_MAX &lt; VAL_MAX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    typedef double Val_t;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#elif VAL_MIN &lt; INT_MIN || INT_MAX &lt; VAL_MAX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    typedef long Val_t;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    typedef int val_t;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div></div></div></div></div><p>You then declare all data objects that must hold this range of values as
having type <code>Val_t</code>. The program chooses the most efficient type.</p><p>Of course, the macros in <code>&lt;limits.h&gt;</code> can be used in code.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="106-localeh"></a>10.6 &lt;locale.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#106-localeh" title="Direct link to heading">#</a></h3><p>Guideline: Be aware of where library behaviour changes with locale.</p><p>When using locales, be aware of where library behaviour changes. Here
are all the places where library behaviour changes with locale.</p><p>10.6.1 The functions <code>strcoll</code> and <code>strxfrm</code>, declared in <code>&lt;string.h&gt;</code>, can change how they collate when category <code>LC_COLLATE</code> changes.</p><p>10.6.2 The functions declared in <code>&lt;ctype.h</code>&gt;, the print and scan functions, declared in <code>&lt;stdio.h&gt;</code>, and the numeric conversion functions, declared in <code>&lt;stdlib.h&gt;</code>, can change how they test and alter certain characters when category <code>LC_TYPE</code> changes.</p><p>10.6.3 The multibyte functions, declared in <code>&lt;stdlib.h&gt;</code> and the print and scan functions, declared in <code>&lt;stdio.h&gt;</code> can change how they parse and translate multibyte strings when category <code>LC_CTYPE</code> changes.</p><p>10.6.4 The print and scan functions, declared in <code>&lt;stdio.h&gt;</code>, and <code>atof</code> and <code>strtod</code>, declared in <code>&lt;stdlib.h&gt;</code>, can change what they use for the decimal point character when category <code>LC_NUMERIC</code> changes.</p><p>10.6.5 The <code>strftime</code> function, declared in <code>&lt;time.h&gt;</code>, can change how it converts times to character strings when category <code>LC_TIME</code> changes.</p><p>10.6.6 The <code>localeconv</code> function, declared in <code>&lt;locale.h&gt;</code>, can change what it returns when categories <code>LC_MONETARY</code> or <code>LC_NUMERIC</code> change.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="107-mathh"></a>10.7 &lt;math.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#107-mathh" title="Direct link to heading">#</a></h3><p>Programmers that use <code>&lt;math.h&gt;</code> have a good idea of what they intend to
do with the functions declared in it; therefore, there is no guideline
for the Standard Library header file. Section 10.4 uses some of the
functions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="108-setjmph"></a>10.8 &lt;setjmp.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#108-setjmph" title="Direct link to heading">#</a></h3><p>Guideline: Do not use <code>setjmp</code> or <code>longjmp</code>.</p><p><code>&lt;setjmp.h&gt;</code> is used when you want to bypass the normal function call
and return mechanism. For those reasons, these Guidelines mandate that
it is not used.</p><p>References: MISRA-C:2004 Rule 20.7.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="109-signalh"></a>10.9 &lt;signal.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#109-signalh" title="Direct link to heading">#</a></h3><hr><p>Guideline: Do not use the signal handling facilities of <code>&lt;signal.h&gt;</code>.</p><p>Signal handling is essentially nonportable, so do not use it.</p><p>References: MISRA-C:2004 Rule 20.8.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1010-stdargh"></a>10.10 &lt;stdarg.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1010-stdargh" title="Direct link to heading">#</a></h3><p>Guideline: When using the macros in <code>&lt;stdarg.h&gt;</code> be aware of the caveats
listed in this Guideline.</p><p>Here are the caveats for using the macros in <code>&lt;stdarg.h&gt;</code>:</p><p>10.10.1 You must declare a function explicitly as having a variable argument list, (call it <code>f</code>). Its argument list must end in ellipsis (, ...), both in its definition and any declarations.</p><p>10.10.2 All calls to function <code>f</code> must be in scope of a function prototype that declares the function in the way described in Para. 10.10.1.</p><p>10.10.3 You must declare the function with at least one fixed argument. The last of these fixed arguments is conventionally referred to as <code>parmN</code>.</p><p>10.10.4 You must declare a data object of type <code>va_list</code>, conventionally called <code>ap</code>, which is visible within the function.</p><p>10.10.5 You must execute <code>va_start(ap, parmN)</code> <em>within</em> <code>f</code>. You must not execute <code>va_list</code> or <code>va_end</code> until you do so.</p><p>10.10.6 You can then execute <code>va_arg(ap,</code> <em>T</em><code>)</code> in the function or in any of the functions that it calls. You must specify the proper types for each of the arguments and in the order they appear in the function call. <code>va_arg</code> is an rvalue macro. You cannot use the macro invocation as an lvalue to alter the value stored in the argument data object.</p><p>10.10.7 You must not write a type <em>T</em> that widens when passed as an argument. Replace <code>float</code> with <code>double</code>. Replace <code>char</code>, <code>signed char</code>, <code>unsigned char</code>, <code>short</code>, and <code>unsigned short</code> with either <code>int</code> or <code>unsigned int</code>. Use <code>unsigned int</code> for an <code>unsigned short</code> that is the same size as <code>int</code>. Rarer still, use <code>unsigned int</code> for a character type that represents no negative values and is the same size as <code>int</code>.</p><p>10.10.8 You must write only a type <em>T</em> that can be converted to a pointer type by appending a <code>*</code>. For example, the type designators <code>int</code> and <code>charÂ *</code> are valid. The type <code>charÂ (*)[5]</code> is not. As a general rule, be wary of type designators that contain parentheses or brackets.</p><p>10.10.9 You must execute <code>va_end</code> within <code>f</code> if you earlier executed <code>va_start</code>. Once you execute <code>va_end</code> you must not again execute <code>va_arg</code> unless you first execute <code>va_start</code> to initiate a rescan. In that case, you must execute <code>va_end</code> again before the function returns.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1011-stddefh"></a>10.11 &lt;stddef.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1011-stddefh" title="Direct link to heading">#</a></h3><p>This library function contains several types and macros, some of which
are defined in other headers.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10111-size_t"></a>10.11.1 size_t<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10111-size_t" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>size_t</code> <em>anywhere</em> your program performs array
subscripting or address arithmetic.</p><p><code>size_t</code> is the safest type to represent any integer data object you use
as an array subscript. You don&#x27;t have to worry if a small array evolves
to a very large one as the program changes. Subscript arithmetic will
never overflow when performed in type <code>size_t</code>. You don&#x27;t have to worry if
the program moves to a machine with peculiar properties, such as 32-bit
bytes and 1-byte longs. <code>size_t</code> offers the greatest chance your code
won&#x27;t be unduly surprised. The only sensible type to use for computing
the sizes of data objects is <code>size_t</code>.</p><p>10.11.2 Be aware of these pitfalls, though: unsigned-integer arithmetic has more pitfalls than signed. You cannot run an unsigned counter down until it goes negative --- it never will. Counting down to zero may lead to clumsy tests. You may occasionally miss the convenience of using negative values (such as <code>EOF</code>) and testing for them easily. However, the improvement in robustness is well worth the learning investment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1012-stdioh"></a>10.12 &lt;stdio.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1012-stdioh" title="Direct link to heading">#</a></h3><p>Most of the functions declared in <code>&lt;stdio.h&gt;</code> operate on a stream that
is associated with an open file.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10121-gets"></a>10.12.1 gets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10121-gets" title="Direct link to heading">#</a></h4><p>Guideline: Function <code>gets</code> shall not be used.</p><p>Do not use <code>gets</code>. You have no way of limiting the number of characters it
reads. Use <code>fgets</code> instead.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10122-getc"></a>10.12.2 getc<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10122-getc" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>getc</code> instead of <code>fgetc</code>.</p><p><code>getc</code> has the same specification as <code>fgetc</code> but is far more likely to have
a masking macro that dramatically improves performance. As a rule,
therefore, you should use <code>getc</code> instead of <code>fgetc</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10123-putc"></a>10.12.3 putc<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10123-putc" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>putc</code> instead of <code>fputc</code>.</p><p><code>putc</code> has the same specification as <code>fputc</code> but is far more likely to have
a masking macro that dramatically improves performance. Therefore, use
<code>putc</code> instead of <code>fputc</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10124-fread"></a>10.12.4 fread<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10124-fread" title="Direct link to heading">#</a></h4><p>Guideline: Call <code>fread</code> in a way such that it can report how many
additional characters it read (if any).</p><p><code>fread</code> is used to read binary data into an array data object or to read
up to a fixed number of characters from any stream. If the size (second)
argument is greater than one, you cannot determine whether the function
also read up to <code>size</code>-1 additional characters beyond what it reports.
As a rule, call the function as <code>fread(buf, 1, size * n, stream)</code> instead
of <code>fread(buf, size, n, stream)</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10125-remove"></a>10.12.5 remove<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10125-remove" title="Direct link to heading">#</a></h4><p>Guideline: Always use <code>remove</code> to remove any files you created with <code>tmpnam</code>.</p><p>This is simply good manners, and ensures temporary files names are not
left on the system.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10126-rename"></a>10.12.6 rename<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10126-rename" title="Direct link to heading">#</a></h4><p>Guideline: Always check the return value of <code>rename</code> to see if the
operation succeeded.</p><p>If <code>rename</code> fails and the file existed previously, it is still known by
its original name.</p><p>See also <a href="#121-function">Guideline 12.1</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10127-rewind"></a>10.12.7 rewind<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10127-rewind" title="Direct link to heading">#</a></h4><p>Guideline: Do not use <code>rewind</code>.</p><p>Unlike the other file-positioning functions, <code>rewind</code> clears the error
indicator for a stream. It also reports no failures. Use <code>fseek(stream,
0, SEEK_SET)</code> and <code>clearerr(stream)</code> as needed instead.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10128-setbuf"></a>10.12.8 setbuf<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10128-setbuf" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>setvbuf</code> instead of <code>setbuf</code>.</p><p><code>setvbuf</code> will get you more control. But be aware it is usually best to
let the Standard C library decide how to buffer input/output.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10129-tmpfile"></a>10.12.9 tmpfile<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10129-tmpfile" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>tmpfile</code> instead of <code>tmpnam</code> wherever possible.</p><p><code>tmpfile</code> opens the file for you and arranges to have it closed and
removed on program termination. tmpnam requires you to assume more of
the responsibilities.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1013-stdlibh"></a>10.13 &lt;stdlib.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1013-stdlibh" title="Direct link to heading">#</a></h3><hr><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10131-heap-overhead"></a>10.13.1 Heap Overhead<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10131-heap-overhead" title="Direct link to heading">#</a></h4><p>10.13.1.1 Guideline: Gather related data into a structure and allocate it all at once. Do <em>not</em> gather unrelated data just to save heap overhead.</p><p>Gathering related data into a structure is good programming practice.
But do not do it at the cost of placing unrelated data into the
structure.</p><p>References: Plauger Chapter 13.</p><p>10.13.1.2 Guideline: Allocate data objects with similar lifetimes all at once, then free them at about the same time. Do <em>not</em> advance or defer unrelated heap operations just to minimize fragmentation.</p><p>Allocating and freeing data objects at about the same time is good
programming practice, but do not do it at the cost of advancing or
delaying allocation and freeing.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10132-exit_failure-and-exit-success"></a>10.13.2 <code>EXIT_FAILURE</code> and <code>EXIT SUCCESS</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#10132-exit_failure-and-exit-success" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>EXIT_FAILURE</code> and <code>EXIT SUCCESS</code> as the argument to <code>exit</code> or
the return value from <code>main</code> to report unsuccessful and successful program
termination.</p><p>Use only these macros as the values returned by <code>main</code>. You can use zero
to indicate successful termination, but any other value will have
different meanings on different operating systems.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10133-abort"></a>10.13.3 <code>abort</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#10133-abort" title="Direct link to heading">#</a></h4><p>Guideline: Wherever possible, call <code>exit(EXIT_FAILURE)</code> instead of <code>abort</code>.</p><p>When you call <code>abort</code>, you cannot be sure that input/output streams are
flushed, files are closed properly, or temporary files are removed.</p><p>See also <a href="#101-asserth">Guideline 10.1</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10134-abs"></a>10.13.4 <code>abs</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#10134-abs" title="Direct link to heading">#</a></h4><p>Guideline: Call <code>abs(x)</code> instead of writing the idiom <code>x &lt; 0 ? --x : x</code>.</p><p>Many Standard C translators generate inline code for <code>abs</code> that is smaller
and faster than the idiom. Also, you avoid the occasional surprise when
you inadvertently evaluate twice an expression with side effects.</p><p>On a two&#x27;s complement machine, <code>abs</code> can generate an overflow.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10135-atof"></a>10.13.5 atof<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10135-atof" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>strtod</code> instead of <code>atof</code>.</p><p>The call <code>atof(s)</code> is equivalent to <code>strtod(s, NULL)</code>, except that <code>atof</code> is
not obliged to store <code>ERANGE</code> in <code>errno</code>. You also get no indication with
<code>atof</code> of how many characters from the string pointed to by <code>s</code> participate
in the conversion.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10136-calloc"></a>10.13.6 calloc<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10136-calloc" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="101361-initialising-to-zero"></a>10.13.6.1 Initialising to zero.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#101361-initialising-to-zero" title="Direct link to heading">#</a></h5><p>Guideline: Do not use <code>calloc</code> to initialise floating-point values to
zeros, or pointers to null pointers.</p><p>A null pointer is not necessarily zero, and the floating-point
representation of 0 may not be all bits zero, so do not rely on <code>calloc</code>
to initialise to those values.</p><p>However, <code>calloc</code> will yield the value 0 for all integral types, including
&#x27;\0&#x27; for character types.</p><p>See also: <a href="#75-null-pointers">Section 7.5</a>.</p><p>References: Ref 5 Chapter 13.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="101362-product-of-arguments"></a>10.13.6.2 Product of Arguments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#101362-product-of-arguments" title="Direct link to heading">#</a></h5><p>Guideline: Do not assume the product of <code>calloc</code>&#x27;s arguments is all that
matters.</p><p>An implementation can select a storage alignment for the allocated data
objects based on the size specified by the second argument. Thus you
should allocate an array of <code>N</code> <code>int</code> as</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">calloc(N, sizeof (int))</span></div></div></div></div></div><p>a data object of type <code>struct x</code> as</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">calloc(1, sizeof (struct x))</span></div></div></div></div></div><p>These second-argument considerations also apply to <code>malloc</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1014-stringh"></a>10.14 &lt;string.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1014-stringh" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10141--mem-functions"></a>10.14.1 <a target="_blank" rel="noopener noreferrer" name="10.14.1"></a> <code>mem</code> Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10141--mem-functions" title="Direct link to heading">#</a></h4><p>Guideline: If a string can contain null characters, specify its length
and use functions whose names begin with <code>mem</code>.</p><p>Guideline: Use <code>memmove</code> to copy a string if the source and destination
strings might overlap.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10142--strn-functions"></a>10.14.2 <a target="_blank" rel="noopener noreferrer" name="10.14.2"></a> <code>strn</code> Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10142--strn-functions" title="Direct link to heading">#</a></h4><p>Guideline: If a string may or may not have a terminating null character,
specify its maximum length and use the functions beginning with <code>strn</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10143-str-functions"></a>10.14.3 str Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#10143-str-functions" title="Direct link to heading">#</a></h4><p>Guideline: If a string definitely has a terminating null character,
specify only the string and use the remaining functions (see <a href="#1041-overflow">10.14.1</a> and
<a href="#10142-strn-functions">10.14.2</a>) whose names begin with <code>str</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="10144-strcat"></a>10.14.4 <code>strcat</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#10144-strcat" title="Direct link to heading">#</a></h4><p>Guideline: Use <code>strcat</code> if you have only two strings to concatenate, or
just a few short strings. Otherwise use <code>strcpy</code>.</p><p>Using <code>strcpy</code> in the situations described in the Guideline will save
repeated and ever-lengthening rescans of the initial part of the string.
Use this form:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">strcpy(s1 += strlen(s1), s2)</span></div></div></div></div></div><p>Ensure the destination array is large enough to hold the concatenated
string.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1015-timeh"></a>10.15 &lt;time.h&gt;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1015-timeh" title="Direct link to heading">#</a></h3><p>Guideline: Always copy the value returned by a call to another (or the
same) function if you need the value beyond a conflicting function call.</p><p>The functions in <code>&lt;time.h&gt;</code> share two static data objects. All functions
that return a type of pointer to <code>char</code> return a pointer to one of these
data objects. All pointers that return a value of type pointer to <code>struct
tm</code> return a pointer to the other.</p><p>This means a call to one of the functions declared in <code>&lt;time.h&gt;</code> can
alter the value stored on behalf of an earlier call to another (or the
same) function. Therefore, if you need the value beyond a conflicting
function call, be careful to copy it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="11-support-libraries"></a>11 SUPPORT LIBRARIES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#11-support-libraries" title="Direct link to heading">#</a></h2><p>Guideline: If Glasswall Solutions Limited has a library of support
routines that have been reviewed, debugged and tested, and released for
use, then those routines should be used rather than a developer writing
his her own routines to achieve the same functionality.</p><p>See also <a href="#17-useful-macro-and-function-examples">Section 17</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="12-error-handling"></a>12 ERROR HANDLING<a aria-hidden="true" tabindex="-1" class="hash-link" href="#12-error-handling" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="121-function"></a>12.1 Function<a aria-hidden="true" tabindex="-1" class="hash-link" href="#121-function" title="Direct link to heading">#</a></h3><p>Guideline: If a function returns error information, then that error
information shall be tested.</p><p>Whether a function is user-defined, part of the Standard Library, or
part of a third party library, if it returns error information, then
that information should be tested by the caller immediately after the
function returns.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="13-values-and-expressions"></a>13 VALUES AND EXPRESSIONS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#13-values-and-expressions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="131-leading-zeros"></a>13.1 Leading Zeros<a aria-hidden="true" tabindex="-1" class="hash-link" href="#131-leading-zeros" title="Direct link to heading">#</a></h3><p>Guideline: Don&#x27;t use octal constants (except zero) and octal escape
sequences.</p><p>Several guidelines in the document recommend laying out data in table
format, and aligning those data vertically. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct atomic_number</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    char *name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int atomic_number;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} atomic_numbers[] =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NITROGEN&quot;,    7 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NIOBIUM&quot;,    41 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NEODYNIUM&quot;,  60 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NOBELIUM&quot;,  102 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div></div></div></div></div><p>However, to make these line up a coder may well pad the atomic numbers so:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct atomic_number</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    char *name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int atomic_number;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} atomic_numbers[] =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NITROGEN&quot;,  007 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NIOBIUM&quot;,   041 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NEODYNIUM&quot;, 060 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    { &quot;NOBELIUM&quot;,  102 },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div></div></div></div></div><p>Unfortunately, this makes them wrong. In C, any integer constant that
begins with a zero is interpreted as an octal number.</p><p>To obviate this, do not use octal numbers or escape sequences in your
code.</p><p>References: MISRA-C:2004 Rule 7.1.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="132-multiline-strings"></a>13.2 Multiline Strings<a aria-hidden="true" tabindex="-1" class="hash-link" href="#132-multiline-strings" title="Direct link to heading">#</a></h3><p>Guideline: Lay out multiline strings over multiple lines.</p><p>If a string has embedded newline characters, but the entire string won&#x27;t
fit on a single line, then break the string after each newline and
concatenate the pieces:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">static const char usage[] = &quot;Usage: dump &lt;file&gt; [-full]\n&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            &quot;(Use -full option for full dump)\n&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            ;</span></div></div></div></div></div><p>This makes the internal appearance of the string mirror its printed appearance.</p><p>References: K&amp;R2 Â§A.2.6.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="133-comma-operator"></a>13.3 Comma Operator<a aria-hidden="true" tabindex="-1" class="hash-link" href="#133-comma-operator" title="Direct link to heading">#</a></h3><p>Guidline: Don&#x27;t use commas to sequence statements.</p><p>The comma operator can reduce the readability of code, so their use is
not recommended.</p><p>References: MISRA-C:2004 Rule 12.10; K&amp;R2 Â§A.7.18.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="134-constants"></a>13.4 Constants<a aria-hidden="true" tabindex="-1" class="hash-link" href="#134-constants" title="Direct link to heading">#</a></h3><p>Guideline: Use symbolic constants to give numbers meaningful names.</p><p>Raw numbers that suddenly appear in the middle of a program are often
mysterious, frequently confusing, always a potential source of errors,
and hard to change in a systematic way.</p><p>Replace raw literals with a pre-processor macro whose name explains the
meaning of the numbers:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define   MOLYBDENUM_ATOMIC_NUMBER   42</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* and later ... */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">printf(&quot;%d\n&quot;, count * MOLYBDENUM_ATOMIC_NUMBER);</span></div></div></div></div></div><p>See <a href="#77-booleans">Â§7.7</a>.</p><p>References: Ref. 7, Appendix E; Ref. 2, Â§1.4.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="14-variables"></a>14 VARIABLES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#14-variables" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="141-global-variables"></a>14.1 Global Variables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#141-global-variables" title="Direct link to heading">#</a></h3><p>Guideline: Avoid using global variables.</p><p>Using local variables increases the coupling of your code. If two
otherwise unrelated sections of code both use a global variable, those
two pieces of code can interact with each other in very subtle ways,
just by the way they interact with that global variable.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="142-initialisation"></a>14.2 Initialisation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#142-initialisation" title="Direct link to heading">#</a></h3><p>Guideline: Initialise all automatic variables.</p><p>The initial value of an automatic object not explicitly initialised is
undefined; therefore, all automatic variables must be explicitly
initialised before read.</p><p>References: MISRA-C:2004 Rule 9.1; K&amp;R2 Â§2.4, Â§4.9, Â§A.8.7.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="143-scope"></a>14.3 Scope<a aria-hidden="true" tabindex="-1" class="hash-link" href="#143-scope" title="Direct link to heading">#</a></h3><p>Guideline: Declare data objects within functions at the innermost possible nesting level.</p><p>It is common for programmers to declare all the variables used in a
function at the top of the function, followed by the processing.
However, the control logic in the function may mean variables are
declared that are never used, and can clutter the code, making it
difficult for a maintainer to understand the process. So localise
variables at the innermost possible level. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (validate_agents)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int agent_num;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (agent_num = AGENT_NUM_MIN; agent_num &lt; AGENT_NUM_MAX; ++agent_num)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>In this example, <code>agent_num</code> is required only if <code>validate_agents</code> is true.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="15-control-structures"></a>15 CONTROL STRUCTURES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#15-control-structures" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="151-linear-coding"></a>15.1 Linear Coding<a aria-hidden="true" tabindex="-1" class="hash-link" href="#151-linear-coding" title="Direct link to heading">#</a></h3><p>Guideline: Reject as many iterations as possible, as early as possible.</p><p>Another guideline recommends coding in paragraphs (See <a href="#69-chunking">6.9</a>). It&#x27;s also a
good idea to code in paragraphs. Don&#x27;t wait until you have all your data
assembled before you start processing. It&#x27;s more efficient, and often
more comprehensible, to verify as you go.</p><p>Checking data as soon as it&#x27;s available means you can short-circuit
sooner if the data are unacceptable. Also, the resulting sections of
code are specific to each datum, rather than to one phase of the
processing. That means your code chunks are better focused on the
distinct elements of the problem domain, rather than on the more complex
interactions between those elements.</p><p>So, instead of this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NON-CONFORMANT */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int i;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int total = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i \&lt; nclients; ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int value;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int projected;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Client_t *client;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    client = &amp;clients[i];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* calculate current and future client value */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value = client-\&gt;volume \* client-\&gt;rate;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    projected = client-\&gt;activity \* value;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* verify client is active, worth watching, and worth keeping \... */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (client-&gt;activity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &amp;&amp; value &gt; WATCH_LEVEL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &amp;&amp; projected &gt;= KEEP_LEVEL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        /* if so, add in the client&#x27;s expected contribution */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        total += projected * client-\&gt;volatility;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>You can generate and test each datum sequentially, like so:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i \&lt; nclients; ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int value;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int rate;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int projected;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Client_t *client;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    client = &amp;clients[i];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* verify active client */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!client-&gt;activity)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        continue;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* calculate current client value and verify client is worth watching ...*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value = client-&gt;volume * client-&gt;rate;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (value &lt; WATCH_LEVEL)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        continue;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* compute likely client future value and verify client is worth keeping ... */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    projected = client-&gt;activity * value;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (projected &lt; KEEP_LEVEL)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        continue;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* Add in the client&#x27;s expected contribution */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    total += projected * client-&gt;volatility;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>NOTE: Use of <code>continue</code> is non-conformant with MISRA-C:2004 Rule 14.5, but
these Guidelines do not ban its use.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="16-undefined-behaviours"></a>16 UNDEFINED BEHAVIOURS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#16-undefined-behaviours" title="Direct link to heading">#</a></h2><p>Guideline: C code shall not be written that invokes undefined behaviour.</p><p>The C Standard defines undefined behaviour thus:</p><blockquote><p>Behaviour, upon use of a nonportable or erroneous program construct or
of erroneous data, for which this International Standard imposes no
requirements.</p></blockquote><p>This means the C Standard imposes <em>no</em> requirements on the behaviour of
a compiler faced with an instance of undefined behaviour. The compiler
(more importantly, any generated code) can do absolutely anything.</p><p>In particular, there is no guarantee that only the undefined part of the
program will behave badly and the rest of the program will perform
normally.</p><p>It is perilous to think that you can tolerate undefined behaviour in a
program. The code is broken.</p><p>The following paragraphs detail all the cases that invoke undefined
behaviour. None of these shall be used in C source code developed by
Glasswall Solutions Limited.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="161-lexical-conventions---constants----character-constants"></a>16.1 Lexical Conventions - Constants -- Character Constants<a aria-hidden="true" tabindex="-1" class="hash-link" href="#161-lexical-conventions---constants----character-constants" title="Direct link to heading">#</a></h3><hr><p>16.1.1 The octal and hexadecimal escapes have no limit on the number of digits, but the behaviour is undefined if the resulting character value exceeds that of the largest character.</p><p>16.1.2 When specifying an escape sequence, if the character following the \ is not one of those specified, the behaviour is undefined.</p><p>16.1.3 If an octal or hexadecimal escape is used to specify a wide character constant, and its value exceeds that representable with <code>wchar_t</code>, the effect is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="162-lexical-conventions----string-literals"></a>16.2 Lexical Conventions -- String Literals<a aria-hidden="true" tabindex="-1" class="hash-link" href="#162-lexical-conventions----string-literals" title="Direct link to heading">#</a></h3><p>16.2.1 The behaviour of a program that attempts to alter a string literal is undefined.</p><p>16.2.2 Concatenation of ordinary and wide string literals is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="163-conversions--integer-and-floating"></a>16.3 Conversions â€” Integer and Floating<a aria-hidden="true" tabindex="-1" class="hash-link" href="#163-conversions--integer-and-floating" title="Direct link to heading">#</a></h3><p>16.3.1 When a value of floating type is converted to integral type, the fractional part is discarded; if the resulting value can not be represented in the integral type, the behaviour is undefined.</p><p>16.3.2 When a value of integral type is converted to floating, and the value is out of range, the behaviour is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="164-conversions--floating-types"></a>16.4 Conversions â€” Floating Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#164-conversions--floating-types" title="Direct link to heading">#</a></h3><p>16.4.1  When a more precise floating value is converted to a less precise floating type, and the value is out of range, the behaviour is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="165-expressions---postfix-expressions---function-calls"></a>16.5 Expressions - Postfix Expressions - Function Calls<a aria-hidden="true" tabindex="-1" class="hash-link" href="#165-expressions---postfix-expressions---function-calls" title="Direct link to heading">#</a></h3><p>16.5.1 If the function declaration in scope for a call is old-style, and the number of arguments disagrees with the number of parameters in the definition of the function, the effect of the call is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="166-expressions---multiplicative-operators"></a>16.6 Expressions - Multiplicative Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#166-expressions---multiplicative-operators" title="Direct link to heading">#</a></h3><p>16.6.1 If the second operand of <code>/</code> or <code>%</code> is 0, the result is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="167-expressions---additive-operators"></a>16.7 Expressions - Additive Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#167-expressions---additive-operators" title="Direct link to heading">#</a></h3><p>16.7.1 If one operand of <code>+</code> is a pointer to an object in an array, and the other is a value of integral type, the result is undefined if the sum pointer points outside the bounds of the array, except at the first location beyond the high end.</p><p>16.7.2 If two pointers to objects of the same type are subtracted, and the pointers do not point either to the same array or to the first location beyond the high end, the result is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="168-expressions---shift-operators"></a>16.8 Expressions - Shift Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#168-expressions---shift-operators" title="Direct link to heading">#</a></h3><p>16.8.1 If the right operand of <code>&lt;&lt;</code> and <code>&gt;&gt;</code> is negative, or greater than or equal to the number of bits in the left expression&#x27;s type, the result is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="169-expressions---relational-operators"></a>16.9 Expressions - Relational Operators<a aria-hidden="true" tabindex="-1" class="hash-link" href="#169-expressions---relational-operators" title="Direct link to heading">#</a></h3><p>16.9.1 Pointer comparison is defined only for parts of the same object, and in the case of an array, to the first location beyond the high end; otherwise it is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1610-preprocessing"></a>16.10 Preprocessing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1610-preprocessing" title="Direct link to heading">#</a></h3><p>16.10.1 The effect of white space characters other than space and horizontal tab is undefined within preprocessor lines.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1611-preprocessing---macro-definition-and-expansion"></a>16.11 Preprocessing - Macro Definition and Expansion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1611-preprocessing---macro-definition-and-expansion" title="Direct link to heading">#</a></h2><p>16.11.1 Regarding <code>##</code>: if invalid tokens are produced, or if the result depends on the order of processing of the <code>##</code> operators, the effect is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1612-preprocessing---file-inclusion"></a>16.12 Preprocessing - File Inclusion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1612-preprocessing---file-inclusion" title="Direct link to heading">#</a></h3><p>16.12.1 In the control line <code>#include &lt;</code><em>filename</em><code>&gt;</code>, if the name <em>filename</em> contains any of double quote (&quot;), single quote (&#x27;), backslash (\) or forward slash followed immediately by asterisk (/*), the effect is undefined.</p><p>16.12.2 Similarly, in the control line <code>#include &quot;</code><em>filename</em><code>&quot;</code>, if the name <em>filename</em> contains any of single quote (&#x27;), backslash (\) or forward slash followed immediately by asterisk (/*), the effect is undefined.</p><p>Thus, sequences of characters that resemble escape sequences cause undefined behaviour. This means you <em>must not</em> use the Windows&#x27; directory delimiter character backslash (\) when specifying a file path.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1613-input-and-output-stdioh---file-operations"></a>16.13 Input and Output: <code>&lt;stdio.h</code>&gt; - File Operations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1613-input-and-output-stdioh---file-operations" title="Direct link to heading">#</a></h3><p>16.13.1 <code>int fflush(FILE *stream)</code>: If <code>stream</code> is an input stream, the result is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1614-input-and-output-stdioh---formatted-output"></a>16.14 Input and Output: <code>&lt;stdio.h&gt;</code> - Formatted Output<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1614-input-and-output-stdioh---formatted-output" title="Direct link to heading">#</a></h3><p>16.14.1 <code>printf</code>, <code>fprintf</code>, <code>sprintf</code>: If the character after the <code>%</code> is not a conversion character, the behaviour is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1615-string-functions-stringh"></a>16.15 String Functions: <code>&lt;string.h&gt;</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#1615-string-functions-stringh" title="Direct link to heading">#</a></h3><p>16.15.1 Except for <code>memmove</code>, the behaviour is undefined if copying takes place between overlapping objects.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1616-linkages-of-identifiers"></a>16.16 Linkages of Identifiers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1616-linkages-of-identifiers" title="Direct link to heading">#</a></h3><p>16.16.1 If, within a translation unit, the same identifier appears with both internal and external linkage, the behaviour is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1617-storage-duration-of-objects"></a>16.17 Storage Duration of Objects<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1617-storage-duration-of-objects" title="Direct link to heading">#</a></h3><p>16.17.1 If an object is referred to outside of its lifetime, the behaviour is undefined.</p><p>###16.18 Conversions - Other Operands -- Pointers
16.18.1 A pointer to an object or incomplete type may be converted to a pointer to a different object or incomplete type. If the resulting pointer is not correctly aligned for the pointed-to type, the behaviour is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1619-expressions---postfix-operators---function-calls"></a>16.19 Expressions - Postfix Operators - Function Calls<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1619-expressions---postfix-operators---function-calls" title="Direct link to heading">#</a></h3><p>16.19.1 If the number of arguments does not equal the number of parameters, the behaviour is undefined.</p><p>16.19.2 If the function is defined with a type that includes a prototype, and either the prototype ends with an ellipsis (, ...) or the types of the arguments after promotion are not compatible with the types of the parameters, the behaviour is undefined.</p><p>16.19.3 If the function is defined with a type that does not include a prototype, and the types of the arguments after promotion are not compatible with those of the parameters after promotion, the behaviour is undefined, except for the following cases:</p><ul><li><p>one promoted type is a signed integer type, the other promoted type
is the corresponding unsigned integer type, and the value is
representable in both types;</p></li><li><p>both types are pointers to qualified or unqualified versions of a
character type or void.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1620-character-handling"></a>16.20 Character Handling<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1620-character-handling" title="Direct link to heading">#</a></h3><p>16.20.1 The header <code>&lt;ctype.h&gt;</code> declares several functions useful for classifying and mapping characters. In all cases the argument is an <code>int</code>, the value of which shall be representable as an <code>unsigned char</code> or shall equal the value of the macro <code>EOF</code>. If the argument has any other value, the behaviour is undefined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1621-environment---hosted-environment"></a>16.21 Environment - Hosted Environment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1621-environment---hosted-environment" title="Direct link to heading">#</a></h3><p>16.21.1 If a program in a hosted environment does not define a function named <code>main</code> using one of these specified forms (or equivalent, e.g. <code>argv</code> can be written as <code>charÂ **Â argv</code>, and so on), the behaviour is undefined:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main(void) { /* ... */ }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main(int argc, char *argv[]) { /* ... */ }</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="17-useful-macro-and-function-examples"></a>17 USEFUL MACRO AND FUNCTION EXAMPLES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#17-useful-macro-and-function-examples" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="171-macros"></a>17.1 Macros<a aria-hidden="true" tabindex="-1" class="hash-link" href="#171-macros" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1711-string-comparisons"></a>17.1.1 String Comparisons<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1711-string-comparisons" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define STREQ(s, t) (strcmp(s, t) == 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define STRLT(s, t) (strcmp(s, t) &lt; 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define STRGT(s, t) (strcmp(s, t) &gt; 0)</span></div></div></div></div></div><p>Example use:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (STREQ(ident, p-&gt;ident))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return p;</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (STRLT(authors-&gt;prev, curr_author))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* process ... */</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1712-miscellaneous-macros"></a>17.1.2 Miscellaneous Macros<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1712-miscellaneous-macros" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define NELEMENTS(a) (sizeof(a) / sizeof(a\[0\]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Example usage */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i &lt; NELEMENTS(names) &amp;&amp; names[i] != NULL; ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* do something with names[i] */</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Swap two objects */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define SWAP(a, b, t) (t = a, a = b, b = t)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Example usage */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SWAP(a[lo], a[mid], tmp);</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* get a line of text; return EOF on fail, or string length on success */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define GETLN(s, n) ((fgets(s, n, stdin)==NULL) ? EOF : strlen(s))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* example usage */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if ((filename_len = GETLN(filename, sizeof filename)) != EOF)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (i = 0; i &lt; filename_len; ++i)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* process each character */</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* start an infinite loop */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define FOREVER for (;;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Example usage */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">FOREVER</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /* process forever; exit with break, return, or exit */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* loop n times, using i to count. Do not use i in loop body */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define LOOPDN(r, n) for (r = n+1; --r &gt; 0; )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Example usage */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">LOOPDN(i, element_size)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SWAP(*a, *b, tmp);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ++a, ++b;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* copy a structure */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#define STRUCTASST(a, b) memcpy(&amp;(a), &amp;(b), sizeof(a))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Example usage */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* copy structure struct_b to structure struct_a */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">STRUCTASST(struct_a, struct_b);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="172-functions"></a>17.2 Functions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#172-functions" title="Direct link to heading">#</a></h3><hr><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1721-substr"></a>17.2.1 substr<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1721-substr" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Extract substring of length LEN starting at index POS in a source string, version 1 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">char dest[LEN+1];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">strncpy(dest, &amp;source[POS], LEN);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dest[LEN] = &#x27;\0&#x27;; /* ensure \0 termination */</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Extract substring of length LEN starting at index POS in a source string, version 2 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">char dest[LEN+1] = &quot;&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">strncat(dest, &amp;source[POS], LEN);</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Extract substring of length LEN starting at index POS in a source string, version 3 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">char dest[LEN+1];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">strncat(dest, source + POS, LEN);</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1722-globbing"></a>17.2.2 globbing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1722-globbing" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* match: match str against pat; return 1 if a match, otherwise 0 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* Example call: match(&quot;a*b.c&quot;, &quot;aplomb.c&quot;), this will return 1 */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int match(const char *pat, const char *str)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    switch (*pat)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        case &#x27;\0&#x27;: return !*str;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        case &#x27;*&#x27;: return match(pat+1, str) || *str &amp;&amp; match(pat, str+1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        case &#x27;?&#x27;: return *str &amp;&amp; match(pat+1, str+1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        default: return *pat == *str &amp;&amp; match(pat+1, str+1);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1723-hex_to_int"></a>17.2.3 hex_to_int<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1723-hex_to_int" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* hex2int.c: Convert hexadecimal number in any locale */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* NOTE: This code does not check for overflow. That requires additional complexity. */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;ctype.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;string.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int hex_to_int(const char *s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int value;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    static const char xd[] = {&quot;0123456789abcdefABCDEF&quot;};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    static const char xv[] =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        0, 1, 2, 3, 4, 5, 6, 7, 8, 9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        10, 11, 12, 13, 14, 15,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        10, 11, 12, 13, 14, 15</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (value = 0; isxdigit(*s); ++s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        value = (value &lt;&lt; 4) + xv[strchr(xd, *s) - xd];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return value;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1724-bit-manipulation-routines"></a>17.2.4 Bit Manipulation Routines<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1724-bit-manipulation-routines" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* invert: invert the n bits of x that begin at position p */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">unsigned invert(unsigned x, int p, int n)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return x ^ (~(~0 &lt;&lt; n) &lt;&lt; (p+1-n));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} /* invert */</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* bitcount: count 1 bits in x (assume two&#x27;s complement number system) */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int bitcount(unsigned x)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int b;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (b = 0; x != 0; x &amp;= x-1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ++b;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return b;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} /* bitcount */</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* setbits: set n bits of x at position p with rightmost bits of y */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* leave all other bits unchanged */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">unsigned setbits(unsigned x, int p, int n, unsigned y)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return x &amp; ~(~(~0 &lt;&lt; n) &lt;&lt; (p+1-n))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           | (y &amp; ~(~0 &lt;&lt; n)) &lt;&lt; (p+1-n)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} /* setbits */</span></div></div></div></div></div><br><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* getbits: get n bits from position p */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">unsigned getbits(unsigned x, int p, int n)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return (x &gt;&gt; (p+1-n)) &amp; ~(~0 &lt;&lt; n);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="1725-miscellaneous-routines"></a>17.2.5 Miscellaneous Routines<a aria-hidden="true" tabindex="-1" class="hash-link" href="#1725-miscellaneous-routines" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/* escape: copy string t to string s; make newline &amp; tab visible */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">void escape(char s[], char t[])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int i, j;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (i = j = 0; t[i] != &#x27;0&#x27;; i++)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        switch (t[i])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            case &#x27;\n&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                s[j++] = &#x27;\\&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                s[j++] = &#x27;n&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            case &#x27;\t&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                s[j++] = &#x27;\\&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                s[j++] = &#x27;t&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                s[j++] = t[i];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                break;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    s[j] = &#x27;\0&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} /* escape */</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="18-tool-support"></a>18 TOOL SUPPORT<a aria-hidden="true" tabindex="-1" class="hash-link" href="#18-tool-support" title="Direct link to heading">#</a></h2><p>The best analysis tool is peer review, some kind of informal code
review, or formal code inspection. But analysis and metrics tools can
provide in-depth analysis of code that those processes can&#x27;t. What
follows are suggestions for such tools.</p><p><a href="https://smartbear.com/product/collaborator/overview/" target="_blank" rel="noopener noreferrer">Collaborator</a><br>
A code review tool which enables reviews to be conducted easily.
Supports threaded conversations by file and line number. All
conversations and actions are tracked like newsgroups, and real-time
web-based contextual chat is supported.</p><p><a href="https://www.doxygen.nl/index.html" target="_blank" rel="noopener noreferrer">Doxygen</a><br>
Doxygen is a documentation system which can generate an on-line
documentation browser, extract the code structure from undocumented
source files, and create normal documentation.</p><p><a href="https://www.imagix.com/products/source-code-analysis.html" target="_blank" rel="noopener noreferrer">Imagix 4D</a><br>
Helps software developers comprehend complex or legacy C Code.</p><p><a href="https://www.perforce.com/products/helix-qac" target="_blank" rel="noopener noreferrer">QAÂ·C, Programming Research Limited (PRQA)</a><br>
Advanced static analysis for C and C++. Provides bug detection and
compliance to coding standards (including MISRA-C:2004). PRQA can create
customer specific compliance modules.</p><p><a href="http://splint.org/" target="_blank" rel="noopener noreferrer">Splint</a><br>
A tool for statically checking C programs for security vulnerabilities and coding mistakes.</p><p><a href="http://www.campwoodsw.com/sourcemonitor.html" target="_blank" rel="noopener noreferrer">SourceMonitor</a><br>
Analyses source code and identifies the relative complexity of the modules.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="19-tests"></a>19 TESTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#19-tests" title="Direct link to heading">#</a></h2><p>Guideline: Run Plauger&#x27;s simple test programs on your implementation to validate the Standard C library implementation.</p><p>Ref <em>5</em> includes simple test programs for each of the Standard C
Libraries. Each program tests part or all of the facilities provided by
one of the standard headers in the Standard C library. The tests focus
primarily on external behaviour, so provide, essentially, a validation
suite. Some implementation errors are so common, and pernicious, that
some of the programs test internal structure.</p><p>These programs are available to test the Standard C library
implementation on your platform, and it is worth using them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="20-c-coding-guidelines"></a>20 C CODING GUIDELINES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#20-c-coding-guidelines" title="Direct link to heading">#</a></h2><p>This appendix lists the complete set of guidelines presented in this
document. A hyperlink to the section heading under which each guideline
appears is provided in square brackets.</p><p><strong>Element Header</strong></p><ul><li><p>Prefix each source file with a template header. [<a href="#51-element-header">Source File
Element Header</a>]</p></li><li><p>Prefix each header file with a template header. [<a href="#51-element-header">Source File
Element Header</a>]</p></li><li><p>Prefix each unit with a template header. [<a href="#52-unit-header">Unit Header</a>]</p></li></ul><p><strong>Code Layout</strong></p><ul><li><p>Where present, sections of code should be laid out in the following
order, prefixed by the comment shown. [<a href="#61-module-layout">Module Layout</a>]</p></li><li><p>Brace and parenthesize using BSD and GNU style. [<a href="#62-bracketing">Bracketing</a>]</p></li><li><p>Separate your control keywords from the following opening bracket. [<a href="#63-keywords">Keywords</a>]</p></li><li><p>Don&#x27;t separate subroutine or variable names from the following
opening bracket. [<a href="#64-subroutines-and-variables">Subroutines and Variables</a>]</p></li><li><p>Use 78-column lines. [<a href="#65-line-lengths">Line Lengths</a>]</p></li><li><p>Use four-column indentation levels. [<a href="#66-indentation">Indentation</a>]</p></li><li><p>Indent with spaces, not tabs. [<a href="#67-tabs">Tabs</a>]</p></li><li><p>Never place two statements on one line. [<a href="#68-blocks">Blocks</a>]</p></li><li><p>Code in paragraphs. [<a href="#69-chunking">Chunking</a>]</p></li><li><p>Corresponding items shall be aligned vertically. [<a href="#610-vertical-alignment">Vertical Alignment</a>]</p></li><li><p>Break long expressions before an operator. [<a href="#611-breaking-long-lines">Breaking Long Lines</a>]</p></li><li><p>Always break a long expression at the operator of the lowest
possible precedence. [<a href="#612-breaking-by-precedence">Breaking by Precedence</a>]</p></li><li><p>Break long assignments before the assignment operator. [<a href="#613-assignments">Assignments</a>]</p></li><li><p>Enforce your chosen layout style automatically. [<a href="#614-automated-layout">Automated Layout</a>]</p></li></ul><p><strong>C Implementation</strong></p><ul><li><p>Ensure header files are idempotent. [<a href="#71-header-files">Header Files</a>]</p></li><li><p>Do not define functions or objects in header files. [<a href="#72-header-file-content">Header File Content</a>]</p></li><li><p>Do not use the <code>goto</code> statement. [<a href="#73-goto">Goto</a>]</p></li></ul><p><strong>Functions</strong></p><ul><li><p>Functions should be as short as practicable. [<a href="#74-functions">Functions</a>]</p></li><li><p>Use the type-qualifier <code>const</code> for non-scalar function parameters.
[<a href="#74-functions">Functions</a>]</p></li><li><p>Comment the terminating brace of a function with its name. [<a href="#74-functions">Functions</a>]</p></li><li><p>Prefix function names in a separately compiled group of elements with a mnemonic. [<a href="#74-functions">Functions</a>]</p></li></ul><p><strong>Null Pointers</strong></p><ul><li><p>Use the <code>NULL</code> macro instead of 0 in pointer contexts. [<a href="#75-null-pointers">The NULL Macro</a>]</p></li><li><p>A null pointer shall be cast to its correct type when used as an
argument to a function call. [<a href="#752-pointer-arguments">Pointer Arguments</a></p></li><li><p>A function pointer shall not be converted to type <code>voidÂ *</code>.
[<a href="#753-function-pointers">Function Pointers</a></p></li></ul><p><strong>Preprocessor</strong></p><ul><li><p>In the definition of a function-like macro each instance of a
parameter shall be enclosed in parentheses unless it is used as the
operand of <code>#</code> or <code>##</code>. [<a href="#76-preprocessor">Preprocessor</a>]</p></li><li><p>C macros shall expand only to a braced initialiser, a constant, a
parenthesised expression, a type qualifier, a storage class
specifier, or a do-while-zero construct. [<a href="#76-preprocessor">Preprocessor</a>]</p></li></ul><p><strong>Booleans</strong></p><ul><li><p>Define pre-processor macros or enumeration constants for true and
false values, which evaluate to 1 and 0. [<a href="#772-use-of-true-and-false">Defining TRUE and FALSE</a>]</p></li><li><p>Only assign TRUE and FALSE to a Boolean variable, never use them in
comparisons. [<a href="#772-use-of-true-and-false">Defining TRUE and FALSE</a>]</p></li></ul><p><strong>Pointer Declarations</strong></p><ul><li>When declaring or defining a pointer variable, always ensure there
is no whitespace between the <code>*</code> and the identifier. [<a href="#78-pointer-declarations">Pointer Declarations</a>]</li></ul><p><strong>Naming Conventions</strong></p><ul><li><p>Name all objects.</p></li><li><p>No identifier shall begin with an underscore. [<a href="#81-identifiers">Identifiers</a>]</p></li><li><p>Identifiers (internal and external) and pre-processor macro names
shall not rely on the significance of more than 31 characters.
[<a href="#81-identifiers">Identifiers</a>]</p></li><li><p>Use grammatical templates when forming identifiers and function
names. [<a href="#81-identifiers">Identifiers</a>]</p></li><li><p>Name Booleans after their associated test. [<a href="#82-booleans">Booleans</a>]</p></li><li><p>Mark variables that store pointers. [<a href="#83-pointer-variables">Pointer Variables</a>]</p></li><li><p>Name arrays in the plural. [<a href="#84-arrays">Arrays</a>]</p></li><li><p>Maintain consistency in the use of multiword identifiers.
[<a href="#85-multiword-identifiers">Multiword Identifiers</a>]</p></li><li><p>Abbr idents by prefx. [<a href="#86-abbreviations">Abbreviations</a>]</p></li><li><p>Abbreviate only when the meaning remains unambiguous. [<a href="#87-ambiguous-abbreviations">Ambiguous Abbreviations</a>]</p></li><li><p>Avoid using inherently ambiguous words in names. [<a href="#88-ambiguous-names">Ambiguous Names</a>]</p></li><li><p>Use K&amp;R2 style use of case. [<a href="#89-general-naming-conventions">General Naming Conventions</a>]</p></li></ul><p><strong>Documentation</strong></p><ul><li><p>Use full-line comments to explain the algorithm. [<a href="#91-algorithmic-documentation">Algorithmic Documentation</a>]</p></li><li><p>Use end-of-line comments to point out subtleties and oddities. [<a href="#92-elucidating-comments">Elucidating Comments</a>]</p></li><li><p>Comment anything that has puzzled or tricked you. [<a href="#93-defensive-documentation">Defensive Documentation</a>]</p></li><li><p>Consider whether it&#x27;s better to rewrite than to comment. [<a href="#94-indicative-documentation">Indicative Documentation</a>]</p></li><li><p>Check the spelling, syntax, and sanity of your documentation. [<a href="#95-proofreading">Proofreading</a>]</p></li></ul><p><strong>Library Functions</strong></p><ul><li><p>Use C&#x27;s Standard Library functions wherever possible.</p></li><li><p>Use <code>assert</code> only in development code. [<a href="#101-asserth">&lt;assert.h&gt;</a>]</p></li><li><p>Use the functions declared in <code>&lt;ctype.h&gt;</code> to test or alter
characters that you read in with <code>fgetc()</code>, <code>getc()</code>, <code>getchar()</code>.
[<a href="#102-ctypeh">&lt;ctype.h&gt;</a>]</p></li><li><p>Do not assume letter codes are adjacent. [<a href="#1022-letter-codes">Letter Codes</a>]</p></li><li><p>Do not use <code>errno</code>. [<a href="#h3-id103-errnoh-3812103-errnohh3">&lt;errno.h&gt;</a>]</p></li><li><p>To avoid overflow, make sure that no value ever exceeds <code>DBL_MAX</code> in
magnitude. [<a href="#h3-id104-floath-3780104-floathh3">&lt;float.h&gt;</a>]</p></li><li><p>To avoid underflow, make sure that no value ever goes below <code>DBL_MIN</code>
in magnitude. [<a href="#1042-underflow">Underflow</a>]</p></li><li><p>Where possible, perform a check when adding a small magnitude to a
large one. [<a href="#1043-significance-loss">Significance Loss</a>]</p></li><li><p>Wherever possible, use the macros provided in <code>&lt;limits.h&gt;</code> to test
the execution environment. Do not do experiments on the
pre-processor. [<a href="#105-limitsh">&lt;limits.h&gt;</a>]</p></li><li><p>Be aware of where library behaviour changes with locale.
[<a href="#106-localeh">&lt;locale.h&gt;</a>]</p></li><li><p>Do not use <code>setjmp</code> or <code>longjmp</code>. [<a href="#108-setjmph">&lt;setjmp.h&gt;</a>]</p></li><li><p>When using the macros in <code>&lt;stdarg.h&gt;</code> be aware of the caveats listed
in this Guideline. [You must declare a function explicitly as
having a variable argument list, (call it f). Its argument list must
end in ellipsis (, ...), both in its definition and any
declarations. [&lt;stdarg.h&gt;](#1010-stdargh)]</p></li><li><p>Use <code>size_t</code> <em>anywhere</em> your program performs array subscripting or
address arithmetic. [<a href="#1011-stddefh">&lt;stddef.h&gt;</a>]</p></li><li><p>Function <code>gets</code> shall not be used. [<a href="#10121-gets">gets</a>]</p></li><li><p>Use <code>getc</code> instead of <code>fgetc</code>. [<a href="#10121-gets">getc</a>]</p></li><li><p>Use <code>putc</code> instead of <code>fputc</code>. [<a href="#10123-putc">putc</a>]</p></li><li><p>Call <code>fread</code> in a way such that it can report how many additional
characters it read (if any). [<a href="#10124-fread">fread</a>]</p></li><li><p>Always use <code>remove</code> to remove any files you created with <code>tmpnam</code>.
[remove](#10125-remove)]</p></li><li><p>Always check the return value of <code>rename </code>to see if the operation
succeeded. [<a href="#10126-rename">rename</a>]</p></li><li><p>Do not use <code>rewind</code>. [<a href="#10127-rewind">rewind</a>]</p></li><li><p>Use <code>setvbuf</code> instead of <code>setbuf</code>. [<a href="#10128-setbuf">setbuf</a>]</p></li><li><p>Use <code>tmpfile</code> instead of <code>tmpnam</code> wherever possible. [<a href="#10129-tmpfile">tmpfile</a>]</p></li><li><p>Gather related data into a structure and allocate it all at once. Do
<em>not</em> gather unrelated data just to save heap overhead.
[<a href="#h3-id1013-stdlibh-33051013-stdlibhh3">&lt;stdlib.h&gt;</a>]</p></li><li><p>Allocate data objects with similar lifetimes all at once, then free
them at about the same time. Do <em>not</em> advance or defer unrelated
heap operations just to minimize fragmentation. [<a href="#h3-id1013-stdlibh-33141013-stdlibhh3">&lt;stdlib.h&gt;</a>]</p></li><li><p>Use <code>EXIT_FAILURE</code> and <code>EXIT SUCCESS</code> as the argument to exit or the
return value from main to report unsuccessful and successful program
termination. [<a href="#10132-exit_failure-and-exit-success">EXIT_FAILURE and EXIT SUCCESS</a>]</p></li><li><p>Wherever possible, call <code>exit(EXIT_FAILURE)</code> instead of <code>abort</code>.
[<a href="#10133-abort">abort</a>]</p></li><li><p>Call <code>abs(x)</code> instead of writing the idiom <code>x &lt; 0 ? --x : x</code>. [<a href="#10134-abs">abs</a>]    </p></li><li><p>Use <code>strtod</code> instead of <code>atof</code>. [<a href="#10135-atof">atof</a>]</p></li><li><p>Do not use <code>calloc</code> to initialise floating-point values to zeros, or
pointers to null pointers. [<a href="#10136-calloc">calloc</a>]</p></li><li><p>Do not assume the product of <code>calloc</code>&#x27;s arguments is all that matters.
[<a href="#10136-calloc">calloc</a>]</p></li><li><p>If a string can contain null characters, specify its length and use
functions whose names begin with <code>mem</code>. [&lt;string.h&gt;](#1014-stringh)]</p></li><li><p>Use <code>memmove</code> to copy a string if the source and destination strings
might overlap. [<a href="#1014-stringh">&lt;string.h&gt;</a>]</p></li><li><p>If a string may or may not have a terminating null character,
specify its maximum length and use the functions beginning with
<code>strn</code>. [<a href="#1014-stringh">&lt;string.h&gt;</a>]</p></li></ul><ul><li>If a string definitely has a terminating null character, specify
only the string and use the remaining functions whose names begin
with <code>str</code>. [<a href="#1014-stringh">&lt;string.h&gt;</a>]</li></ul><ul><li>Use <code>strcat</code> if you have only two strings to concatenate, or just a
few short strings. Otherwise use strcpy. [<a href="#1014-stringh">&lt;string.h&gt;</a>]</li></ul><ul><li>Always copy the value returned by a call to another (or the same)
function if you need the value beyond a conflicting function call.
[<a href="#1015-timeh">&lt;time.h&gt;</a>]</li></ul><p><strong>SUPPORT LIBRARIES</strong></p><ul><li>If Glasswall Solutions Limited has a library of support routines
that have been reviewed, debugged and tested, and released for use,
then those routines should be used rather than a developer writing
his or her own routines to achieve the same functionality. [<a href="#11-support-libraries">Support Libraries</a>]</li></ul><p><strong>Error Handling</strong></p><ul><li>If a function returns error information, then that error information
shall be tested. [<a href="#121-function">Function</a>]</li></ul><p><strong>Values and Expressions</strong></p><ul><li><p>Don&#x27;t use octal constants (except zero) and octal escape sequences.
[<a href="#131-leading-zeros">Leading Zeros</a>]</p></li><li><p>Lay out multiline strings over multiple lines. [<a href="#132-multiline-strings">Multiline Strings</a>]</p></li><li><p>Don&#x27;t use commas to sequence statements. [<a href="#133-comma-operator">Comma Operator</a></p></li><li><p>Use symbolic constants to give numbers meaningful names.
[<a href="#134-constants">Constants</a></p></li></ul><p><strong>Variables</strong></p><ul><li><p>Avoid using global variables. [<a href="#141-global-variables">Global Variables</a>]</p></li><li><p>Initialise all automatic variables. [<a href="#142-initialisation">Initialisation</a>]</p></li><li><p>Declare data objects within functions at the innermost possible
nesting level. [<a href="#143-scope">Scope</a>]</p></li></ul><p><strong>Control Structures</strong></p><ul><li>Reject as many iterations as possible, as early as possible.
[<a href="#151-linear-coding">Linear Coding</a>]</li></ul><p><strong>Undefined Behaviours</strong></p><p>The Undefined Behaviours section lists many guidelines in the form of
explicatory paragraphs; therefore, they are not reproduced here. [<a href="#16-undefined-behaviours">Undefined Behaviours</a>]</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-the-c-programming-language" class="table-of-contents__link">1. THE C PROGRAMMING LANGUAGE</a></li><li><a href="#2-introduction" class="table-of-contents__link">2. INTRODUCTION</a><ul><li><a href="#21-objective" class="table-of-contents__link">2.1 Objective</a></li><li><a href="#22-applicability" class="table-of-contents__link">2.2 Applicability</a></li><li><a href="#23-nomenclature" class="table-of-contents__link">2.3 Nomenclature</a></li></ul></li><li><a href="#3-referenced-documents" class="table-of-contents__link">3. REFERENCED DOCUMENTS</a></li><li><a href="#4-c-program-structure" class="table-of-contents__link">4. C PROGRAM STRUCTURE</a></li><li><a href="#5--code-headers" class="table-of-contents__link">5. <a name="5"></a> CODE HEADERS</a><ul><li><a href="#51-element-header" class="table-of-contents__link">5.1 Element Header</a></li><li><a href="#52-unit-header" class="table-of-contents__link">5.2 Unit Header</a></li></ul></li><li><a href="#6-code-layout" class="table-of-contents__link">6 CODE LAYOUT</a><ul><li><a href="#61-module-layout" class="table-of-contents__link">6.1 Module Layout</a></li><li><a href="#62-bracketing" class="table-of-contents__link">6.2 Bracketing</a></li><li><a href="#63-keywords" class="table-of-contents__link">6.3 Keywords</a></li><li><a href="#64-subroutines-and-variables" class="table-of-contents__link">6.4 Subroutines and Variables</a></li><li><a href="#65-line-lengths" class="table-of-contents__link">6.5 Line Lengths</a></li><li><a href="#66-indentation" class="table-of-contents__link">6.6 Indentation</a></li><li><a href="#67-tabs" class="table-of-contents__link">6.7 Tabs</a></li><li><a href="#68-blocks" class="table-of-contents__link">6.8 Blocks</a></li><li><a href="#69-chunking" class="table-of-contents__link">6.9 Chunking</a></li><li><a href="#610-vertical-alignment" class="table-of-contents__link">6.10 Vertical Alignment</a></li><li><a href="#611-breaking-long-lines" class="table-of-contents__link">6.11 Breaking Long Lines</a></li><li><a href="#612-breaking-by-precedence" class="table-of-contents__link">6.12 Breaking by Precedence</a></li><li><a href="#613-assignments" class="table-of-contents__link">6.13 Assignments</a></li><li><a href="#614-automated-layout" class="table-of-contents__link">6.14 Automated Layout</a></li></ul></li><li><a href="#7-c-implementation" class="table-of-contents__link">7 C IMPLEMENTATION</a><ul><li><a href="#71-header-files" class="table-of-contents__link">7.1 Header Files</a></li><li><a href="#72-header-file-content" class="table-of-contents__link">7.2 Header File Content</a></li><li><a href="#73-goto" class="table-of-contents__link">7.3 Goto</a></li><li><a href="#74-functions" class="table-of-contents__link">7.4 Functions</a></li><li><a href="#75-null-pointers" class="table-of-contents__link">7.5 Null Pointers</a></li><li><a href="#76-preprocessor" class="table-of-contents__link">7.6 Preprocessor</a></li><li><a href="#77-booleans" class="table-of-contents__link">7.7 Booleans</a></li><li><a href="#78-pointer-declarations" class="table-of-contents__link">7.8 Pointer Declarations</a></li></ul></li><li><a href="#8-naming-conventions" class="table-of-contents__link">8 NAMING CONVENTIONS</a><ul><li><a href="#81-identifiers" class="table-of-contents__link">8.1 Identifiers</a></li><li><a href="#82-booleans" class="table-of-contents__link">8.2 Booleans</a></li><li><a href="#83-pointer-variables" class="table-of-contents__link">8.3 Pointer Variables</a></li><li><a href="#84-arrays" class="table-of-contents__link">8.4 Arrays</a></li><li><a href="#85-multiword-identifiers" class="table-of-contents__link">8.5 Multiword Identifiers</a></li><li><a href="#86-abbreviations" class="table-of-contents__link">8.6 Abbreviations</a></li></ul></li><li><a href="#87-ambiguous-abbreviations" class="table-of-contents__link">8.7 Ambiguous Abbreviations</a><ul><li><a href="#88-ambiguous-names" class="table-of-contents__link">8.8 Ambiguous Names</a></li><li><a href="#89-general-naming-conventions" class="table-of-contents__link">8.9 General Naming Conventions</a></li></ul></li><li><a href="#9-documentation" class="table-of-contents__link">9 DOCUMENTATION</a><ul><li><a href="#91-algorithmic-documentation" class="table-of-contents__link">9.1 Algorithmic Documentation</a></li><li><a href="#92-elucidating-comments" class="table-of-contents__link">9.2 Elucidating Comments</a></li><li><a href="#93-defensive-documentation" class="table-of-contents__link">9.3 Defensive Documentation</a></li><li><a href="#94-indicative-documentation" class="table-of-contents__link">9.4 Indicative Documentation</a></li><li><a href="#95-proofreading" class="table-of-contents__link">9.5 Proofreading</a></li></ul></li><li><a href="#10-library-functions" class="table-of-contents__link">10 LIBRARY FUNCTIONS</a><ul><li><a href="#101-asserth" class="table-of-contents__link">10.1 &lt;assert.h&gt;</a></li><li><a href="#102-ctypeh" class="table-of-contents__link">10.2 &lt;ctype.h&gt;</a></li><li><a href="#103-errnoh" class="table-of-contents__link">10.3 &lt;errno.h&gt;</a></li><li><a href="#104-floath" class="table-of-contents__link">10.4 &lt;float.h&gt;</a></li><li><a href="#105-limitsh" class="table-of-contents__link">10.5 &lt;limits.h&gt;</a></li><li><a href="#106-localeh" class="table-of-contents__link">10.6 &lt;locale.h&gt;</a></li><li><a href="#107-mathh" class="table-of-contents__link">10.7 &lt;math.h&gt;</a></li><li><a href="#108-setjmph" class="table-of-contents__link">10.8 &lt;setjmp.h&gt;</a></li><li><a href="#109-signalh" class="table-of-contents__link">10.9 &lt;signal.h&gt;</a></li><li><a href="#1010-stdargh" class="table-of-contents__link">10.10 &lt;stdarg.h&gt;</a></li><li><a href="#1011-stddefh" class="table-of-contents__link">10.11 &lt;stddef.h&gt;</a></li><li><a href="#1012-stdioh" class="table-of-contents__link">10.12 &lt;stdio.h&gt;</a></li><li><a href="#1013-stdlibh" class="table-of-contents__link">10.13 &lt;stdlib.h&gt;</a></li><li><a href="#1014-stringh" class="table-of-contents__link">10.14 &lt;string.h&gt;</a></li><li><a href="#1015-timeh" class="table-of-contents__link">10.15 &lt;time.h&gt;</a></li></ul></li><li><a href="#11-support-libraries" class="table-of-contents__link">11 SUPPORT LIBRARIES</a></li><li><a href="#12-error-handling" class="table-of-contents__link">12 ERROR HANDLING</a><ul><li><a href="#121-function" class="table-of-contents__link">12.1 Function</a></li></ul></li><li><a href="#13-values-and-expressions" class="table-of-contents__link">13 VALUES AND EXPRESSIONS</a><ul><li><a href="#131-leading-zeros" class="table-of-contents__link">13.1 Leading Zeros</a></li><li><a href="#132-multiline-strings" class="table-of-contents__link">13.2 Multiline Strings</a></li><li><a href="#133-comma-operator" class="table-of-contents__link">13.3 Comma Operator</a></li><li><a href="#134-constants" class="table-of-contents__link">13.4 Constants</a></li></ul></li><li><a href="#14-variables" class="table-of-contents__link">14 VARIABLES</a><ul><li><a href="#141-global-variables" class="table-of-contents__link">14.1 Global Variables</a></li><li><a href="#142-initialisation" class="table-of-contents__link">14.2 Initialisation</a></li><li><a href="#143-scope" class="table-of-contents__link">14.3 Scope</a></li></ul></li><li><a href="#15-control-structures" class="table-of-contents__link">15 CONTROL STRUCTURES</a><ul><li><a href="#151-linear-coding" class="table-of-contents__link">15.1 Linear Coding</a></li></ul></li><li><a href="#16-undefined-behaviours" class="table-of-contents__link">16 UNDEFINED BEHAVIOURS</a><ul><li><a href="#161-lexical-conventions---constants----character-constants" class="table-of-contents__link">16.1 Lexical Conventions - Constants -- Character Constants</a></li><li><a href="#162-lexical-conventions----string-literals" class="table-of-contents__link">16.2 Lexical Conventions -- String Literals</a></li><li><a href="#163-conversions--integer-and-floating" class="table-of-contents__link">16.3 Conversions â€” Integer and Floating</a></li><li><a href="#164-conversions--floating-types" class="table-of-contents__link">16.4 Conversions â€” Floating Types</a></li><li><a href="#165-expressions---postfix-expressions---function-calls" class="table-of-contents__link">16.5 Expressions - Postfix Expressions - Function Calls</a></li><li><a href="#166-expressions---multiplicative-operators" class="table-of-contents__link">16.6 Expressions - Multiplicative Operators</a></li><li><a href="#167-expressions---additive-operators" class="table-of-contents__link">16.7 Expressions - Additive Operators</a></li><li><a href="#168-expressions---shift-operators" class="table-of-contents__link">16.8 Expressions - Shift Operators</a></li><li><a href="#169-expressions---relational-operators" class="table-of-contents__link">16.9 Expressions - Relational Operators</a></li><li><a href="#1610-preprocessing" class="table-of-contents__link">16.10 Preprocessing</a></li></ul></li><li><a href="#1611-preprocessing---macro-definition-and-expansion" class="table-of-contents__link">16.11 Preprocessing - Macro Definition and Expansion</a><ul><li><a href="#1612-preprocessing---file-inclusion" class="table-of-contents__link">16.12 Preprocessing - File Inclusion</a></li><li><a href="#1613-input-and-output-stdioh---file-operations" class="table-of-contents__link">16.13 Input and Output: <code>&lt;stdio.h</code>&gt; - File Operations</a></li><li><a href="#1614-input-and-output-stdioh---formatted-output" class="table-of-contents__link">16.14 Input and Output: <code>&lt;stdio.h&gt;</code> - Formatted Output</a></li><li><a href="#1615-string-functions-stringh" class="table-of-contents__link">16.15 String Functions: <code>&lt;string.h&gt;</code></a></li><li><a href="#1616-linkages-of-identifiers" class="table-of-contents__link">16.16 Linkages of Identifiers</a></li><li><a href="#1617-storage-duration-of-objects" class="table-of-contents__link">16.17 Storage Duration of Objects</a></li><li><a href="#1619-expressions---postfix-operators---function-calls" class="table-of-contents__link">16.19 Expressions - Postfix Operators - Function Calls</a></li><li><a href="#1620-character-handling" class="table-of-contents__link">16.20 Character Handling</a></li><li><a href="#1621-environment---hosted-environment" class="table-of-contents__link">16.21 Environment - Hosted Environment</a></li></ul></li><li><a href="#17-useful-macro-and-function-examples" class="table-of-contents__link">17 USEFUL MACRO AND FUNCTION EXAMPLES</a><ul><li><a href="#171-macros" class="table-of-contents__link">17.1 Macros</a></li><li><a href="#172-functions" class="table-of-contents__link">17.2 Functions</a></li></ul></li><li><a href="#18-tool-support" class="table-of-contents__link">18 TOOL SUPPORT</a></li><li><a href="#19-tests" class="table-of-contents__link">19 TESTS</a></li><li><a href="#20-c-coding-guidelines" class="table-of-contents__link">20 C CODING GUIDELINES</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/glasswall-sdk-site/docs/products/cloud-sdk/rebuild/rebuild-quickstart">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/glasswall" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/glasswallglobal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/glasswall-solutions-limited/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/glasswall-sdk-site/styles.224b9508.js"></script>
<script src="/glasswall-sdk-site/runtime~main.4894b7f9.js"></script>
<script src="/glasswall-sdk-site/main.6fff0e7d.js"></script>
<script src="/glasswall-sdk-site/1.1b4556d1.js"></script>
<script src="/glasswall-sdk-site/2.96103f89.js"></script>
<script src="/glasswall-sdk-site/166.b218925c.js"></script>
<script src="/glasswall-sdk-site/167.5739662b.js"></script>
<script src="/glasswall-sdk-site/935f2afb.7d59ae1f.js"></script>
<script src="/glasswall-sdk-site/17896441.54002607.js"></script>
<script src="/glasswall-sdk-site/ac16dd88.dc134dbf.js"></script>
</body>
</html>